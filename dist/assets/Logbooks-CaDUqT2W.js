import{_ as K,r as c,m as X,a5 as Y,w as Z,c as k,a as l,u as ee,o as h,b as a,d as s,f as ae,s as oe,i as _,e as i,ag as le,j as n,l as u,af as te,z as P,h as se,F as re,p as ie,t as C,ae as ne,aa as de}from"./index-D8k0Z2VW.js";import{Q as ce}from"./QTooltip-BIz5X8HU.js";import{Q as ue}from"./QTd-Dz2_L_T4.js";import{Q as b}from"./QSelect-CCFBgF8v.js";import{Q as me,a as w,b as F}from"./QItemLabel-BiKvV_tR.js";import{Q as pe}from"./QList-D6hH9GPe.js";import{Q as fe}from"./QPage-CDUm3vNP.js";import{C as be}from"./ClosePopup-DkFGp95i.js";import{u as ve}from"./use-quasar-Dk_EY-O4.js";import{u as ge}from"./useEntityManager-6kUzRwOq.js";import{u as he}from"./useNotifications-C15CMF32.js";import{T as _e}from"./Table-DrGgNztj.js";import{M}from"./Modal-CwwUMTwV.js";import{B as m}from"./Button-ByZOtwGJ.js";import{_ as B}from"./ButtonTableOptions-ivpzFDPv.js";import{B as we}from"./BackButton-OAicZK4q.js";import{P as Ve}from"./PageHeader-BZtJRD6F.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./apiClient-Vvvjylwf.js";import"./QLinearProgress-C9Sex94R.js";const ye={class:"full-width row"},ze={class:"col-12"},xe={class:"filters-wrapper q-my-lg"},De={class:"filters-left bg-white"},ke={class:"actions-right row items-center q-gutter-sm"},Pe={class:"q-pa-md flex flex-center column text-grey full-width"},Ce={class:"modal-header"},Fe={class:"text-h6 flex items-center"},Me={class:"advanced-filters-grid"},Be={class:"row justify-end q-gutter-sm full-width"},Qe={class:"modal-header"},qe={class:"text-h6 flex items-center"},Ae={class:"plantillas-list"},Le={class:"plantilla-actions"},Ue={__name:"Logbooks",setup(Ie){const Q=ee();ve();const{error:Ne,success:V,warning:Se}=he(),q=()=>({_id:"",aprendizId:"",observaciones:""}),A={list:"/bitacoras/list",update:t=>`/bitacoras/update/${t}`},L={listError:"Error al listar bitácoras",updateSuccess:"Bitácora actualizada correctamente",updateError:"Error al actualizar bitácora",noData:"No hay bitácoras registradas"},U=(t,o)=>{const e={...o};return t.search?.trim()&&(e.search=t.search.trim()),e},{loadingTable:I,rows:v,filtersData:d,pagination:p,handlePaginationRequest:N,handleSearchChange:S}=ge({entityName:"bitacora",entityNamePlural:"bitacoras",getDefaultFormData:q,endpoints:A,messages:L,buildFilterParams:U}),f=c(!1),g=c(!1),r=c({programa:null,modalidad:null,fechaDesde:null,fechaHasta:null,progresoMin:null,progresoMax:null}),y=c([{id:1,aprendiz:"Juana María Torres Perez",ficha:"2926021"},{id:2,aprendiz:"María Andréa Rodríguez Ordóñez",ficha:"2926021"}]),R=c([{id:1,nombre:"Plantilla Bitácora Semanal",descripcion:"Formato estándar para registro semanal",icon:"description"},{id:2,nombre:"Plantilla Bitácora Mensual",descripcion:"Formato para reporte mensual",icon:"event_note"},{id:3,nombre:"Guía de Diligenciamiento",descripcion:"Instrucciones para llenar la bitácora",icon:"help_outline"}]),T=[{label:"Análisis y Desarrollo de Software",value:"software"},{label:"Gestión de Redes",value:"redes"},{label:"Desarrollo Web",value:"web"},{label:"Diseño Gráfico",value:"diseño"}],E=[{label:"Proyecto Productivo",value:"proyecto"},{label:"Pasantía",value:"pasantia"},{label:"Contrato Aprendizaje",value:"contrato"},{label:"Monitoria",value:"monitoria"}],z=[{label:"0%",value:0},{label:"25%",value:25},{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],H=[{name:"aprendiz",label:"Aprendiz",field:"aprendiz",align:"left",sortable:!0},{name:"ficha",label:"Ficha",field:"ficha",align:"left",sortable:!0},{name:"acciones",label:"Opciones",field:"acciones",align:"center"}],$=X(()=>{let t=[...y.value];if(d.value.search?.trim()){const o=d.value.search.toLowerCase().trim();t=t.filter(e=>e.aprendiz&&e.aprendiz.toLowerCase().includes(o)||e.ficha&&e.ficha.toLowerCase().includes(o))}return t}),O=()=>{f.value=!0},j=()=>{r.value={programa:null,modalidad:null,fechaDesde:null,fechaHasta:null,progresoMin:null,progresoMax:null}},G=()=>{f.value=!1,V("Filtros aplicados correctamente"),p.value.page=1},J=t=>{Q.push({name:"InstructorLogbooksDetails",params:{id:t.id},query:{aprendiz:t.aprendiz,ficha:t.ficha}})},W=()=>{g.value=!0},x=t=>{V(`Descargando ${t.nombre}`)};return Y(()=>{v.value=y.value}),Z($,t=>{v.value=t},{immediate:!0}),(t,o)=>(h(),k(fe,{class:"bitacora-page"},{default:l(()=>[a(we,{class:"q-mb-lg"}),s("div",ye,[s("div",ze,[a(ae,{class:"shadow-1 hero-card q-mb-xl"},{default:l(()=>[a(oe,null,{default:l(()=>[a(Ve,{title:"Bitácoras de Aprendices",description:"Visualiza y gestiona las bitácoras de seguimiento de los aprendices."})]),_:1})]),_:1}),s("div",xe,[s("div",De,[a(_,{modelValue:i(d).search,"onUpdate:modelValue":[o[0]||(o[0]=e=>i(d).search=e),i(S)],outlined:"",dense:"",clearable:"",debounce:"600",placeholder:"Buscar por aprendiz o ficha",class:"search-input"},le({prepend:l(()=>[a(n,{name:"search",color:"green-8"})]),_:2},[i(d).search?{name:"append",fn:l(()=>[a(n,{name:"info_outline",color:"grey-6",size:"sm",class:"cursor-pointer"},{default:l(()=>[a(ce,{class:"bg-grey-8",offset:[0,8]},{default:l(()=>[...o[10]||(o[10]=[u(" Busca en: Nombre del aprendiz y número de ficha ",-1)])]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue"])]),s("div",ke,[a(m,{label:"Filtros Avanzados",icon:"tune","custom-class":"gradient-btn","no-caps":!0,onClick:O}),a(m,{label:"Plantillas",icon:"description","custom-class":"gradient-btn","no-caps":!0,onClick:W})])]),a(_e,{card:"",rows:i(v),columns:H,pagination:i(p),"onUpdate:pagination":o[1]||(o[1]=e=>te(p)?p.value=e:null),loading:i(I),"row-key":"id",onRequest:i(N)},{"body-cell-acciones":l(e=>[a(ue,{props:e,class:"text-center table-options"},{default:l(()=>[a(B,{icon:"visibility",color:"grey-7",tooltip:"Ver bitácoras",onClick:D=>J(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":l(()=>[s("div",Pe,[a(n,{name:"description",size:"2.5em",color:"grey-5"}),o[11]||(o[11]=s("div",{class:"text-subtitle2 q-mt-sm"}," No hay bitácoras registradas ",-1))])]),_:1},8,["rows","pagination","loading","onRequest"]),a(M,{modelValue:f.value,"onUpdate:modelValue":o[8]||(o[8]=e=>f.value=e),variant:"edit",width:"700px","max-width":"95vw"},{header:l(()=>[s("div",Ce,[s("div",Fe,[a(n,{name:"tune",class:"q-mr-sm"}),o[12]||(o[12]=u(" Filtros Avanzados ",-1))])])]),body:l(()=>[s("div",Me,[a(b,{modelValue:r.value.programa,"onUpdate:modelValue":o[2]||(o[2]=e=>r.value.programa=e),options:T,outlined:"",dense:"",clearable:"",label:"Programa de Formación","emit-value":"","map-options":""},null,8,["modelValue"]),a(b,{modelValue:r.value.modalidad,"onUpdate:modelValue":o[3]||(o[3]=e=>r.value.modalidad=e),options:E,outlined:"",dense:"",clearable:"",label:"Modalidad","emit-value":"","map-options":""},null,8,["modelValue"]),a(_,{modelValue:r.value.fechaDesde,"onUpdate:modelValue":o[4]||(o[4]=e=>r.value.fechaDesde=e),outlined:"",dense:"",type:"date",label:"Fecha Desde"},null,8,["modelValue"]),a(_,{modelValue:r.value.fechaHasta,"onUpdate:modelValue":o[5]||(o[5]=e=>r.value.fechaHasta=e),outlined:"",dense:"",type:"date",label:"Fecha Hasta"},null,8,["modelValue"]),a(b,{modelValue:r.value.progresoMin,"onUpdate:modelValue":o[6]||(o[6]=e=>r.value.progresoMin=e),options:z,outlined:"",dense:"",clearable:"",label:"Progreso Mínimo","emit-value":"","map-options":""},null,8,["modelValue"]),a(b,{modelValue:r.value.progresoMax,"onUpdate:modelValue":o[7]||(o[7]=e=>r.value.progresoMax=e),options:z,outlined:"",dense:"",clearable:"",label:"Progreso Máximo","emit-value":"","map-options":""},null,8,["modelValue"])])]),footer:l(()=>[s("div",Be,[a(m,{label:"Limpiar",icon:"clear","custom-class":"boton-cerrar",onClick:j}),a(m,{label:"Aplicar Filtros",icon:"check","custom-class":"gradient-btn",onClick:G})])]),_:1},8,["modelValue"]),a(M,{modelValue:g.value,"onUpdate:modelValue":o[9]||(o[9]=e=>g.value=e),variant:"view",width:"600px","max-width":"95vw"},{header:l(()=>[s("div",Qe,[s("div",qe,[a(n,{name:"description",class:"q-mr-sm"}),o[13]||(o[13]=u(" Plantillas de Bitácora ",-1))])])]),body:l(()=>[s("div",Ae,[a(pe,null,{default:l(()=>[(h(!0),se(re,null,ie(R.value,e=>P((h(),k(me,{key:e.id,class:"plantilla-item",clickable:"",onClick:D=>x(e)},{default:l(()=>[a(w,{avatar:""},{default:l(()=>[a(n,{name:e.icon,color:"grey-7",size:"md"},null,8,["name"])]),_:2},1024),a(w,null,{default:l(()=>[a(F,{class:"plantilla-nombre"},{default:l(()=>[u(C(e.nombre),1)]),_:2},1024),a(F,{caption:""},{default:l(()=>[u(C(e.descripcion),1)]),_:2},1024)]),_:2},1024),a(w,{side:""},{default:l(()=>[s("div",Le,[a(B,{icon:"download",color:"grey-7",tooltip:"Descargar",onClick:ne(D=>x(e),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"])),[[de]])),128))]),_:1})])]),footer:l(()=>[P(a(m,{label:"Cerrar","custom-class":"boton-cerrar"},null,512),[[be]])]),_:1},8,["modelValue"])])])]),_:1}))}},na=K(Ue,[["__scopeId","data-v-c3a159c3"]]);export{na as default};
