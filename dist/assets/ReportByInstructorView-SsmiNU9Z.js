import{_ as I,r as u,n as q,a5 as P,c as C,a as l,o as h,b as s,d as a,f as k,s as B,j as V,h as Q,g as T,t as c,l as j}from"./index-D8k0Z2VW.js";import{Q as D}from"./QTd-Dz2_L_T4.js";import{Q as F}from"./QBadge-pToOuXWH.js";import{Q as S}from"./QPage-CDUm3vNP.js";import{B as $}from"./BackButton-OAicZK4q.js";import{P as N}from"./PageHeader-BZtJRD6F.js";import{T as M}from"./Table-DrGgNztj.js";import{_ as g}from"./ButtonTableOptions-ivpzFDPv.js";import{B as R}from"./Button-ByZOtwGJ.js";import{M as E}from"./Modal-CwwUMTwV.js";import{g as H}from"./apiClient-Vvvjylwf.js";import"./QList-D6hH9GPe.js";import"./QSelect-CCFBgF8v.js";import"./QItemLabel-BiKvV_tR.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./QLinearProgress-C9Sex94R.js";import"./QTooltip-BIz5X8HU.js";const L={class:"full-width row"},z={class:"col-12"},U={class:"container"},A={class:"q-pa-md flex flex-center column text-grey full-width"},J={key:0,class:"row q-col-gutter-lg"},G={class:"col-12 col-md-6"},K={class:"data-grid"},O={class:"data-row"},W={class:"data-value"},X={class:"data-row"},Y={class:"data-value"},Z={class:"data-row"},aa={class:"data-value"},ta={class:"data-row"},oa={class:"data-value"},ea={class:"col-12 col-md-6"},sa={class:"data-grid"},ra={class:"data-row"},la={class:"data-value"},ia={class:"data-row"},na={class:"data-value"},da={class:"data-row"},ca={class:"data-value"},ua={class:"data-row"},ma={class:"data-value"},va={__name:"ReportByInstructorView",setup(fa){const i=q(),o=u({instructor:i.query.instructor||null,programa:i.query.programa||null,ficha:i.query.ficha||null,trimestre:i.query.trimestre||null,estadoInstructor:i.query.estadoInstructor||null,fechaInicioPrograma:i.query.fechaInicioPrograma||null,fechaFinPrograma:i.query.fechaFinPrograma||null,jornada:i.query.jornada||null}),_=[{name:"instructor",label:"Instructor",field:"instructor",align:"left"},{name:"cedula",label:"Cedula",field:"cedula",align:"center"},{name:"seguimiento",label:"tipo Seguimiento",field:"seguimiento",align:"left"},{name:"horas",label:"Total horas",field:"horas",align:"center"}],f=u([]),p=u(!1),r=u(null),m=u(!1),w=async()=>{try{p.value=!0;const e=new URLSearchParams;o.value.instructor&&e.append("instructor",o.value.instructor),o.value.programa&&e.append("programa",o.value.programa),o.value.ficha&&e.append("ficha",o.value.ficha),o.value.trimestre&&e.append("trimestre",o.value.trimestre),o.value.estadoInstructor&&e.append("estadoInstructor",o.value.estadoInstructor),o.value.fechaInicioPrograma&&e.append("fechaInicioPrograma",o.value.fechaInicioPrograma),o.value.fechaFinPrograma&&e.append("fechaFinPrograma",o.value.fechaFinPrograma),o.value.jornada&&e.append("jornada",o.value.jornada);const t=`/reportes/instructor${e.toString()?`?${e.toString()}`:""}`,v=(await H(t)).fichas||[];f.value=v.map(d=>({...d,instructor:d.instructor||d.name||"-",cedula:d.cedula||d.document||"-",seguimiento:d.seguimiento||"-",horas:d.horas||d.totalHoras||0}))}catch{f.value=[]}finally{p.value=!1}};P(()=>{w()});const b=e=>{r.value=e,m.value=!0},x=e=>{},y=e=>{};return(e,t)=>(h(),C(S,{class:"q-pa-md report-view-page"},{default:l(()=>[s($,{class:"q-mb-lg"}),a("div",L,[a("div",z,[s(k,{class:"shadow-1 hero-card q-mb-xl"},{default:l(()=>[s(B,null,{default:l(()=>[s(N,{title:"Fichas por Instructor",description:"Listado de fichas y asignaciones por instructor."})]),_:1})]),_:1}),a("div",U,[s(M,{card:"",rows:f.value,columns:_,"row-key":"_id",loading:p.value},{"body-cell-acciones":l(n=>[s(D,{props:n,class:"text-center table-options"},{default:l(()=>[s(g,{icon:"visibility",color:"grey",tooltip:"Ver detalle",onClick:v=>b(n.row)},null,8,["onClick"]),s(g,{icon:"file_download",color:"grey-7",tooltip:"Descargar",onClick:v=>x(n.row)},null,8,["onClick"]),s(g,{icon:"delete",color:"negative",tooltip:"Eliminar",onClick:v=>y(n.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":l(()=>[a("div",A,[s(V,{name:"badge",size:"2.5em",color:"positive"}),t[2]||(t[2]=a("div",{class:"text-subtitle2 q-mt-sm"}," No se encontraron fichas asociadas a los filtros seleccionados ",-1))])]),_:1},8,["rows","loading"])])])]),s(E,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=n=>m.value=n),width:"1200px","max-width":"98vw"},{header:l(()=>[...t[3]||(t[3]=[a("div",{class:"modal-header-content"},[a("div",{class:"text-h6"},"Detalles del Instructor")],-1)])]),body:l(()=>[r.value?(h(),Q("div",J,[a("div",G,[t[8]||(t[8]=a("div",{class:"text-h6 q-mb-md section-title"},"Información del Instructor",-1)),a("div",K,[a("div",O,[t[4]||(t[4]=a("div",{class:"text-weight-bold"},"Instructor:",-1)),a("div",W,c(r.value.instructor||"-"),1)]),a("div",X,[t[5]||(t[5]=a("div",{class:"text-weight-bold"},"Cédula:",-1)),a("div",Y,c(r.value.cedula||"-"),1)]),a("div",Z,[t[6]||(t[6]=a("div",{class:"text-weight-bold"},"Tipo de Seguimiento:",-1)),a("div",aa,c(r.value.seguimiento||"-"),1)]),a("div",ta,[t[7]||(t[7]=a("div",{class:"text-weight-bold"},"Total de Horas:",-1)),a("div",oa,[s(F,{color:"primary"},{default:l(()=>[j(c(r.value.horas||0)+" horas ",1)]),_:1})])])])]),a("div",ea,[t[13]||(t[13]=a("div",{class:"text-h6 q-mb-md section-title"},"Información Académica",-1)),a("div",sa,[a("div",ra,[t[9]||(t[9]=a("div",{class:"text-weight-bold"},"Programa:",-1)),a("div",la,c(r.value.programa||"-"),1)]),a("div",ia,[t[10]||(t[10]=a("div",{class:"text-weight-bold"},"Ficha:",-1)),a("div",na,c(r.value.ficha||"-"),1)]),a("div",da,[t[11]||(t[11]=a("div",{class:"text-weight-bold"},"Trimestre:",-1)),a("div",ca,c(r.value.trimestre||"-"),1)]),a("div",ua,[t[12]||(t[12]=a("div",{class:"text-weight-bold"},"Jornada:",-1)),a("div",ma,c(r.value.jornada||"-"),1)])])])])):T("",!0)]),footer:l(()=>[s(R,{label:"Cerrar","custom-class":"boton-cerrar",onClick:t[0]||(t[0]=n=>m.value=!1)})]),_:1},8,["modelValue"])]),_:1}))}},Fa=I(va,[["__scopeId","data-v-0ed05ba7"]]);export{Fa as default};
