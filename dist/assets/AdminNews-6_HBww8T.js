import{_ as ne,h as g,o as m,g as re,d as s,b as l,ai as $e,F as q,p as k,t as d,r as T,m as Me,a5 as Pe,c as G,a as r,f as Re,s as Ue,a9 as ze,e as o,i as V,j as D,af as J,l as N,z as Y,ae as Qe}from"./index-D8k0Z2VW.js";import{Q as ie}from"./QTd-Dz2_L_T4.js";import{Q as He}from"./QSelect-CCFBgF8v.js";import{Q as Le}from"./QFile-DYrxQo6S.js";import{Q as Be}from"./QForm-BHoNUr4c.js";import{Q as Oe}from"./QPage-CDUm3vNP.js";import{C as W}from"./ClosePopup-DkFGp95i.js";import{u as je}from"./useEntityManager-6kUzRwOq.js";import{g as P,p as Ge}from"./apiClient-Vvvjylwf.js";import{u as Je}from"./useNotifications-C15CMF32.js";import{B as Ye}from"./BackButton-OAicZK4q.js";import{T as We}from"./Table-DrGgNztj.js";import{B as A}from"./Button-ByZOtwGJ.js";import{_ as Ke}from"./ButtonTableOptions-ivpzFDPv.js";import{M as R}from"./Modal-CwwUMTwV.js";import{P as Xe}from"./PageHeader-BZtJRD6F.js";import{S as Ze}from"./StatsCard-CWZ95buy.js";import"./QItemLabel-BiKvV_tR.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./QList-D6hH9GPe.js";import"./QLinearProgress-C9Sex94R.js";import"./QTooltip-BIz5X8HU.js";const et={class:"urgent-section q-pa-md"},tt={key:0,class:"text-center q-pa-md"},at={key:1,class:"q-pa-sm novedades-container"},st={class:"novedad-content"},ot={class:"text-h6"},lt={class:"text-subtitle1"},it={class:"text-caption"},nt={class:"text-center text-caption text-grey-7 q-mt-xs"},rt={class:"text-center"},dt={__name:"CardNovedades",props:{novedades:{type:Array,required:!0},loading:{type:Boolean,default:!1},errorMessage:{type:String,required:!0}},emits:["mostrar-tabla"],setup(S){function x(v){if(!v)return"-";const y=v.createdAt||v.datesofia||v.date||"";if(!y)return"-";try{const c=U(y);return c<0?`Faltan ${Math.abs(c)} días`:c===0?"Hoy":c===1?"Hace 1 día":`Hace ${c} días`}catch{return"-"}}function U(v){const y=new Date(v),c=new Date;y.setHours(0,0,0,0),c.setHours(0,0,0,0);const b=Date.UTC(y.getFullYear(),y.getMonth(),y.getDate()),I=Date.UTC(c.getFullYear(),c.getMonth(),c.getDate());return Math.floor((I-b)/(1e3*60*60*24))}return(v,y)=>(m(),g("div",et,[S.loading?(m(),g("div",tt,[l($e,{color:"primary",size:"3em"}),y[0]||(y[0]=s("div",{class:"q-mt-md"},"Cargando...",-1))])):S.novedades.length?(m(),g("div",at,[(m(!0),g(q,null,k(S.novedades,(c,b)=>(m(),g("div",{key:c._id||b,class:"novedad-item q-mb-md"},[s("div",st,[s("div",ot,d(c.tpnew||"Novedad"),1),s("div",lt,d(c.name||"-"),1),s("div",it,"Ficha: "+d(c.fiche?.number||c.code||"-"),1)]),s("div",nt,d(x(c)),1)]))),128))])):re("",!0),s("div",rt,d(S.errorMessage),1)]))}},ct=ne(dt,[["__scopeId","data-v-dc7d4c2f"]]),ut={class:"q-mb-lg"},mt={class:"full-width row"},vt={class:"col-12"},pt={class:"stats-container q-mb-lg"},ft={class:"stats-grid"},gt={key:0,class:"urgent-cards-container"},yt={class:"urgent-cards-grid"},wt={class:"text-center q-mt-xl"},ht={key:1,class:"table-container"},bt={class:"filters-wrapper flex items-center justify-between q-my-lg"},_t={class:"filters-left flex items-center bg-white"},Dt={class:"filter-item"},At={class:"filter-item"},Nt={class:"filters-right"},St={class:"row q-mb-md"},xt={class:"col-12 text-center"},Et={class:"q-pa-md flex flex-center column text-grey full-width"},Ct={class:"text-h6 flex items-center"},Tt={key:0,class:"modal-content-grid"},Vt={class:"modal-column"},qt={class:"data-grid"},kt={class:"data-row"},It={class:"data-value"},Ft={class:"data-row"},$t={class:"data-value"},Mt={class:"data-row"},Pt={class:"data-value"},Rt={class:"data-row"},Ut={class:"data-value"},zt={class:"data-row"},Qt={class:"data-value"},Ht={class:"modal-column"},Lt={class:"data-grid"},Bt={class:"data-row"},Ot={class:"data-value"},jt={class:"data-row"},Gt={class:"data-value"},Jt={class:"data-row"},Yt={class:"data-value"},Wt={class:"data-row"},Kt={class:"data-value"},Xt={class:"data-row"},Zt={class:"data-value"},ea={class:"data-row"},ta={class:"data-value"},aa={class:"modal-column",style:{"grid-column":"1 / -1"}},sa={class:"data-grid"},oa={class:"data-row"},la={class:"data-value"},ia={class:"text-h6 flex items-center"},na={class:"modal-content-grid"},ra={class:"modal-column"},da={class:"modal-column"},ca={class:"row justify-end q-gutter-sm full-width"},ua={class:"text-h6 flex items-center"},ma={class:"statistics-content"},va={key:0,class:"text-center q-pa-lg text-grey-7"},pa={class:"stat-label"},fa={class:"stat-count"},ga={class:"text-h6 flex items-center"},ya={class:"statistics-content"},wa={key:0,class:"text-center q-pa-lg text-grey-7"},ha={class:"stat-label"},ba={class:"stat-count"},_a={__name:"AdminNews",setup(S){const{error:x,success:U,warning:v}=Je(),y=()=>({apprenticeId:"",tpnew:"DESERCIÓN",cause:"",datesofia:new Date().toISOString().split("T")[0],file:null}),c={list:"/news/listNews",create:"/news/createNew",update:t=>`/news/updateNew/${t}`},b={listError:"Error al cargar novedades",createSuccess:"Novedad creada exitosamente",createError:"Error al crear la novedad",updateSuccess:"Novedad actualizada exitosamente",updateError:"Error al actualizar la novedad",noData:"No hay novedades registradas"},I=t=>{let e=[],a=0;return t?.msg?.news&&Array.isArray(t.msg.news)?(e=t.msg.news,a=t.msg.totalDocuments||e.length):Array.isArray(t?.msg)&&(e=t.msg,a=e.length),{data:e,total:a}},K=t=>{const e=new FormData;return e.append("apprenticeId",t.apprenticeId),e.append("tpnew",t.tpnew),e.append("cause",t.cause.trim()),e.append("datesofia",t.datesofia),t.file&&e.append("file",t.file),e},{loading:F,loadingTable:z,rows:Q,showAddDialog:de,showDetailDialog:ce,isEditMode:X,selectedEntity:ue,filtersData:p,pagination:_,formData:u,resetPaginationState:me,openFormDialog:ve,closeFormDialog:pe,openDetailsDialog:fe,handleAddDialogVisibility:ge,resetForm:ye}=je({entityName:"news",entityNamePlural:"news",getDefaultFormData:y,endpoints:c,messages:b,processResponse:I,buildPayload:K});p.value.startDate="",p.value.endDate="";const H=Q,f=ue,$=de,L=ce,we=ve,he=pe,be=fe,Z=ye,M=async()=>{const{page:t,rowsPerPage:e}=_.value;z.value=!0;try{const a={page:t,limit:e};p.value.startDate&&(a.startDate=p.value.startDate),p.value.endDate&&(a.endDate=p.value.endDate);const n=await P(c.list,{params:a}),i=I(n);Q.value=i.data,_.value.rowsNumber=i.total,!i.data.length&&(p.value.startDate||p.value.endDate)&&v("No se encontraron novedades en el rango de fechas seleccionado")}catch(a){x(a?.response?.data?.msg||a?.message||b.listError),Q.value=[],_.value.rowsNumber=0}finally{z.value=!1}},ee=async()=>{if(!u.value.apprenticeId||!u.value.tpnew||!u.value.cause||!u.value.datesofia){v("Por favor complete todos los campos requeridos");return}if(u.value.file&&!u.value.file.name.toLowerCase().endsWith(".jpg")){v("Solo se permiten archivos JPG");return}F.value=!0;try{const t=K(u.value);await Ge(c.create,t,{headers:{"Content-Type":"multipart/form-data"}}),U(b.createSuccess),$.value=!1,Z(),await le(),await M()}catch(t){console.error("Error:",t),x(t?.response?.data?.msg||t?.message||b.createError),t?.response?.data?.errors&&Array.isArray(t.response.data.errors)&&t.response.data.errors.forEach(e=>v(e))}finally{F.value=!1}},B=T(!1),E=T([{title:"TIPOS DE NOVEDADES",value:0},{title:"ESTADOS",value:0},{title:"RESUELTAS ESTE MES",value:0},{title:"CRÍTICAS SIN ATENDER >3 DÍAS",value:0}]),w=T({byType:{data:[],uniqueCount:0,totalCount:0},byStatus:{data:[],uniqueCount:0,totalCount:0}}),O=T(!1),j=T(!1),_e=["DESERCIÓN"],De=[{name:"fecha",label:"Fecha",align:"left",field:t=>{const e=t?.createdAt||t?.datesofia||"";if(!e)return"N/A";try{return new Date(e).toLocaleDateString("es-ES")}catch{return"N/A"}},sortable:!0},{name:"aprendiz",label:"Aprendiz",align:"left",field:t=>t?.name||"N/A"},{name:"cedula",label:"Cédula",align:"left",field:t=>Se(t)},{name:"ficha",label:"Ficha",align:"left",field:t=>t?.fiche?.number||t?.code||"N/A"},{name:"programa",label:"Programa",align:"left",field:t=>ae(t)},{name:"tipo",label:"Tipo",align:"left",field:t=>t?.tpnew||"N/A"},{name:"estado",label:"Estado",align:"center",field:t=>t?.state||String(t?.status||"N/A")},{name:"instructor",label:"Instructor",align:"left",field:t=>se(t)},{name:"tiempo",label:"Tiempo",align:"center"},{name:"acciones",label:"Acciones",align:"center"}],Ae=Me(()=>{if(!H.value.length)return[];const t=n=>{const i=n?.createdAt||n?.datesofia;if(!i)return new Date;if(i.includes("/")){const[h,C,Fe]=i.split("/");return new Date(`${Fe}-${C}-${h}`)}return new Date(i)},e=[...H.value].sort((n,i)=>t(n)-t(i)),a=e.filter(n=>!n?.processed&&["REGISTRADA","REGISTRADO"].includes(n?.state)).slice(0,4);if(a.length<4){const n=e.filter(i=>!i?.processed&&!a.includes(i)).slice(0,4-a.length);a.push(...n)}if(a.length<4){const n=e.filter(i=>!a.includes(i)).slice(0,4-a.length);a.push(...n)}return a}),te=t=>{const e=new Date(t);e.setHours(0,0,0,0);const a=new Date;return a.setHours(0,0,0,0),Math.floor((a-e)/(1e3*60*60*24))},Ne=t=>{if(!t)return"N/A";let e=0;if(t.includes("/")){const[a,n,i]=t.split("/");e=te(`${n}/${a}/${i}`)}else e=te(t);return e<0?`Faltan ${Math.abs(e)} días`:e===0?"Hoy":e===1?"Hace 1 día":`Hace ${e} días`},Se=t=>{const e=t?.tpdocument||"",a=t?.document||"";return a?`${e} ${a}`.trim():"N/A"},ae=t=>{const e=t?.fiche?.program;return e&&typeof e=="object"?e.name||e.code||"N/A":t?.coordination?.name||"N/A"},se=t=>{if(t?.fiche?.owner?.name)return t.fiche.owner.name;if(t?.owner?.name)return t.owner.name;const e=t?.instructor;return e?typeof e=="object"?e.name||e.Name||e._id||"N/A":String(e):"N/A"};function oe(){xe(),me(),M()}function xe(){if(!p.value.startDate||!p.value.endDate)return;const t=new Date(p.value.startDate);new Date(p.value.endDate)<t&&(v("La fecha de fin debe ser posterior a la fecha de inicio"),p.value.endDate="")}function Ee(){Ce(u.value.datesofia)}function Ce(t){if(!t)return;const e=new Date(t),a=new Date;a.setHours(23,59,59,999),e>a&&(v("No se pueden seleccionar fechas futuras"),u.value.datesofia="")}const Te=t=>{if(t&&t.length>0){const e=t[0];e.failedPropValidation==="max-file-size"?v("Archivo demasiado grande. Máximo 5MB"):e.failedPropValidation==="accept"?v("Solo se permiten archivos JPG"):v("Archivo no válido")}},le=async()=>{try{const t=await P("/news/statistics");if(t?.data?.totales){const e=t.data.totales;E.value=[{title:"TIPOS DE NOVEDADES",value:w.value.byType.totalCount||0},{title:"ESTADOS",value:w.value.byStatus.totalCount||0},{title:"RESUELTAS ESTE MES",value:e.resueltasMes||0},{title:"CRÍTICAS SIN ATENDER >3 DÍAS",value:e.criticasSinAtender||0}]}await Promise.all([Ve(),qe()])}catch(t){console.error("Error al cargar estadísticas:",t),x("Error al cargar las estadísticas"),E.value.forEach(e=>e.value=0)}},Ve=async()=>{try{const t=await P("/statistics/news/by-type");let e=[];t?.data&&Array.isArray(t.data)?e=t.data:t?.statistics&&Array.isArray(t.statistics)?e=t.statistics:t?.data?.statistics&&Array.isArray(t.data.statistics)?e=t.data.statistics:(console.warn("No statistics found for byType",t),e=[]);const a=e.filter(i=>{const h=i._id!==null&&i._id!==void 0&&i._id!=="",C=typeof i.count=="number"&&i.count>0;return h&&C}),n=a.reduce((i,h)=>i+(h.count||0),0);w.value.byType={data:a,uniqueCount:a.length,totalCount:n},E.value[0].value=n}catch(t){console.error("Error fetching type statistics:",t),w.value.byType={data:[],uniqueCount:0,totalCount:0}}},qe=async()=>{try{const t=await P("/statistics/news/by-status");let e=[];t?.data&&Array.isArray(t.data)?e=t.data:t?.statistics&&Array.isArray(t.statistics)?e=t.statistics:t?.data?.statistics&&Array.isArray(t.data.statistics)?e=t.data.statistics:(console.warn("No statistics found for byStatus",t),e=[]);const a=e.filter(i=>{const h=i._id!==null&&i._id!==void 0&&i._id!=="",C=typeof i.count=="number"&&i.count>0;return h&&C}),n=a.reduce((i,h)=>i+(h.count||0),0);w.value.byStatus={data:a,uniqueCount:a.length,totalCount:n},E.value[1].value=n}catch(t){console.error("Error fetching status statistics:",t),w.value.byStatus={data:[],uniqueCount:0,totalCount:0}}},ke=t=>{t?.pagination&&(_.value={page:t.pagination.page,rowsPerPage:t.pagination.rowsPerPage,rowsNumber:t.pagination.rowsNumber??_.value.rowsNumber},M())},Ie=()=>{Z(),u.value.tpnew="DESERCIÓN",u.value.datesofia=new Date().toISOString().split("T")[0],we()};return Pe(()=>{le(),M()}),(t,e)=>(m(),G(Oe,{class:"q-pa-md news-page"},{default:r(()=>[s("div",ut,[l(Ye)]),s("div",mt,[s("div",vt,[l(Re,{class:"shadow-1 hero-card q-mb-xl"},{default:r(()=>[l(Ue,null,{default:r(()=>[l(Xe,{title:"Novedades y Alertas Administrativas",description:"Se resuelve las novenades de los aprendices"})]),_:1})]),_:1}),s("div",pt,[s("div",ft,[(m(!0),g(q,null,k(E.value,(a,n)=>(m(),G(Ze,{key:n,title:a.title,value:a.value,class:ze(["stat-card",{"cursor-pointer":n===0||n===1}]),onClick:i=>n===0?O.value=!0:n===1?j.value=!0:null},null,8,["title","value","class","onClick"]))),128))])]),e[36]||(e[36]=s("div",{class:"text-center q-mb-lg"},[s("p",{class:"text-body2 text-grey-7"}," Las novedades tienen un plazo máximo de 15 días hábiles para ser resueltas ")],-1)),B.value?(m(),g("div",ht,[s("div",bt,[s("div",_t,[s("div",Dt,[l(V,{modelValue:o(p).startDate,"onUpdate:modelValue":[e[1]||(e[1]=a=>o(p).startDate=a),oe],outlined:"",dense:"",type:"date",label:"Fecha desde",placeholder:"DD/MM/AAAA"},{prepend:r(()=>[l(D,{name:"event",color:"green-8"})]),_:1},8,["modelValue"])]),s("div",At,[l(V,{modelValue:o(p).endDate,"onUpdate:modelValue":[e[2]||(e[2]=a=>o(p).endDate=a),oe],outlined:"",dense:"",type:"date",label:"Fecha hasta",placeholder:"DD/MM/AAAA"},{prepend:r(()=>[l(D,{name:"event",color:"green-8"})]),_:1},8,["modelValue"])])]),s("div",Nt,[l(A,{label:"Añadir nueva novedad","custom-class":"create-news-btn",icon:"add",onClick:Ie})])]),s("div",St,[s("div",xt,[l(A,{label:"Volver a novedades urgentes","custom-class":"gradient-btn",icon:"arrow_back",onClick:e[3]||(e[3]=a=>B.value=!1)})])]),l(We,{card:"",rows:o(H),columns:De,pagination:o(_),"onUpdate:pagination":e[4]||(e[4]=a=>J(_)?_.value=a:null),"loanding-table":o(z),"row-key":"_id",onRequest:ke},{"body-cell-tiempo":r(a=>[l(ie,{props:a,class:"text-center"},{default:r(()=>[N(d(Ne(a.row.createdAt||a.row.datesofia)),1)]),_:2},1032,["props"])]),"body-cell-acciones":r(a=>[l(ie,{props:a,class:"text-center table-options"},{default:r(()=>[l(Ke,{icon:"visibility",color:"grey",tooltip:"Ver detalles",onClick:n=>o(be)(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":r(()=>[s("div",Et,[l(D,{name:"notification_important",size:"2.5em",color:"positive"}),e[15]||(e[15]=s("div",{class:"text-subtitle2 q-mt-sm"}," No hay novedades registradas ",-1))])]),_:1},8,["rows","pagination","loanding-table"])])):(m(),g("div",gt,[e[14]||(e[14]=s("div",{class:"urgent-title"},"Novedades Urgentes",-1)),s("div",yt,[(m(!0),g(q,null,k(Ae.value,a=>(m(),G(ct,{key:a._id,novedades:[a],loading:o(F)},null,8,["novedades","loading"]))),128))]),s("div",wt,[l(A,{label:"Ver todas las novedades","custom-class":"gradient-btn",icon:"visibility",onClick:e[0]||(e[0]=a=>B.value=!0)})])])),l(R,{modelValue:o(L),"onUpdate:modelValue":e[5]||(e[5]=a=>J(L)?L.value=a:null),variant:"view",width:"900px","max-width":"95vw"},{header:r(()=>[s("div",Ct,[l(D,{name:"notification_important",class:"q-mr-sm"}),e[16]||(e[16]=N(" DETALLES DE LA NOVEDAD ",-1))])]),body:r(()=>[o(f)?(m(),g("div",Tt,[s("div",Vt,[e[22]||(e[22]=s("div",{class:"section-title"},"Datos del aprendiz",-1)),s("div",qt,[s("div",kt,[e[17]||(e[17]=s("div",{class:"text-weight-bold"},"Nombre completo:",-1)),s("div",It,d(o(f).name||"-"),1)]),s("div",Ft,[e[18]||(e[18]=s("div",{class:"text-weight-bold"},"Tipo de documento:",-1)),s("div",$t,d(o(f).tpdocument||"-"),1)]),s("div",Mt,[e[19]||(e[19]=s("div",{class:"text-weight-bold"},"Número de documento:",-1)),s("div",Pt,d(o(f).document||"-"),1)]),s("div",Rt,[e[20]||(e[20]=s("div",{class:"text-weight-bold"},"Teléfono:",-1)),s("div",Ut,d(o(f).phone||"-"),1)]),s("div",zt,[e[21]||(e[21]=s("div",{class:"text-weight-bold"},"Email:",-1)),s("div",Qt,d(o(f).email||"-"),1)])])]),s("div",Ht,[e[29]||(e[29]=s("div",{class:"section-title"},"Información de la novedad",-1)),s("div",Lt,[s("div",Bt,[e[23]||(e[23]=s("div",{class:"text-weight-bold"},"Tipo de novedad:",-1)),s("div",Ot,d(o(f).tpnew||"-"),1)]),s("div",jt,[e[24]||(e[24]=s("div",{class:"text-weight-bold"},"Estado:",-1)),s("div",Gt,d(o(f).state||String(o(f).status||"-")),1)]),s("div",Jt,[e[25]||(e[25]=s("div",{class:"text-weight-bold"},"Ficha:",-1)),s("div",Yt,d(o(f).fiche?.number||o(f).code||"-"),1)]),s("div",Wt,[e[26]||(e[26]=s("div",{class:"text-weight-bold"},"Programa:",-1)),s("div",Kt,d(ae(o(f))),1)]),s("div",Xt,[e[27]||(e[27]=s("div",{class:"text-weight-bold"},"Instructor responsable:",-1)),s("div",Zt,d(se(o(f))),1)]),s("div",ea,[e[28]||(e[28]=s("div",{class:"text-weight-bold"},"Fecha de creación:",-1)),s("div",ta,d(o(f).createdAt?new Date(o(f).createdAt).toLocaleDateString("es-ES"):o(f).datesofia||"-"),1)])])]),s("div",aa,[e[30]||(e[30]=s("div",{class:"section-title"},"Descripción de la causa",-1)),s("div",sa,[s("div",oa,[s("div",la,d(o(f).cause||"Sin descripción"),1)])])])])):re("",!0)]),footer:r(()=>[Y(l(A,{label:"Cerrar","custom-class":"boton-cerrar"},null,512),[[W]])]),_:1},8,["modelValue"]),l(R,{modelValue:o($),"onUpdate:modelValue":[e[11]||(e[11]=a=>J($)?$.value=a:null),o(ge)],variant:"edit",width:"800px","max-width":"90vw",persistent:""},{header:r(()=>[s("div",ia,[l(D,{name:"add",class:"q-mr-sm"}),N(" "+d(o(X)?"Editar novedad":"Añadir nueva novedad"),1)])]),body:r(()=>[l(Be,{onSubmit:Qe(ee,["prevent"])},{default:r(()=>[s("div",na,[s("div",ra,[e[31]||(e[31]=s("div",{class:"section-title"},"Datos de la novedad",-1)),l(V,{modelValue:o(u).apprenticeId,"onUpdate:modelValue":e[6]||(e[6]=a=>o(u).apprenticeId=a),filled:"",dense:"",label:"ID del Aprendiz *",type:"text",rules:[a=>!!a||"El ID del aprendiz es requerido"]},null,8,["modelValue","rules"]),l(He,{modelValue:o(u).tpnew,"onUpdate:modelValue":e[7]||(e[7]=a=>o(u).tpnew=a),filled:"",dense:"",label:"Tipo de novedad *",options:_e,rules:[a=>!!a||"El tipo de novedad es requerido"]},null,8,["modelValue","rules"]),l(V,{modelValue:o(u).datesofia,"onUpdate:modelValue":[e[8]||(e[8]=a=>o(u).datesofia=a),Ee],filled:"",dense:"",label:"Fecha de creación *",type:"date",placeholder:"DD/MM/AAAA",rules:[a=>!!a||"La fecha es requerida"]},null,8,["modelValue","rules"])]),s("div",da,[e[33]||(e[33]=s("div",{class:"section-title"},"Detalles adicionales",-1)),l(V,{modelValue:o(u).cause,"onUpdate:modelValue":e[9]||(e[9]=a=>o(u).cause=a),filled:"",dense:"",label:"Causa *",type:"textarea",rows:"3",rules:[a=>!!a||"La causa es requerida"]},null,8,["modelValue","rules"]),l(Le,{modelValue:o(u).file,"onUpdate:modelValue":e[10]||(e[10]=a=>o(u).file=a),filled:"",dense:"",label:"Archivo adjunto (opcional)",accept:".jpg","max-file-size":"5242880",onRejected:Te,clearable:""},{prepend:r(()=>[l(D,{name:"attach_file"})]),hint:r(()=>[...e[32]||(e[32]=[N(" El archivo es opcional. Solo se aceptan imágenes JPG (máximo 5MB) ",-1)])]),_:1},8,["modelValue"])])])]),_:1})]),footer:r(()=>[s("div",ca,[l(A,{label:"Cancelar","custom-class":"boton-cerrar",onClick:o(he)},null,8,["onClick"]),l(A,{label:o(X)?"Actualizar":"Añadir Novedad","custom-class":"gradient-btn",icon:"add",loading:o(F),onClick:ee},null,8,["label","loading"])])]),_:1},8,["modelValue","onUpdate:modelValue"]),l(R,{modelValue:O.value,"onUpdate:modelValue":e[12]||(e[12]=a=>O.value=a),variant:"view",width:"800px"},{header:r(()=>[s("div",ua,[l(D,{name:"analytics",class:"q-mr-sm"}),e[34]||(e[34]=N(" Estadísticas por Tipo de Novedad ",-1))])]),body:r(()=>[s("div",ma,[w.value.byType.data.length===0?(m(),g("div",va," No hay estadísticas disponibles ")):(m(!0),g(q,{key:1},k(w.value.byType.data,a=>(m(),g("div",{key:a._id,class:"stat-item"},[s("div",pa,d(a._id||"Sin especificar"),1),s("div",fa,d(a.count),1)]))),128))])]),footer:r(()=>[Y(l(A,{label:"Cerrar","custom-class":"boton-cerrar"},null,512),[[W]])]),_:1},8,["modelValue"]),l(R,{modelValue:j.value,"onUpdate:modelValue":e[13]||(e[13]=a=>j.value=a),variant:"view",width:"800px"},{header:r(()=>[s("div",ga,[l(D,{name:"query_stats",class:"q-mr-sm"}),e[35]||(e[35]=N(" Estadísticas por Estado de Novedad ",-1))])]),body:r(()=>[s("div",ya,[w.value.byStatus.data.length===0?(m(),g("div",wa," No hay estadísticas disponibles ")):(m(!0),g(q,{key:1},k(w.value.byStatus.data,a=>(m(),g("div",{key:a._id,class:"stat-item"},[s("div",ha,d(a._id||"Sin especificar"),1),s("div",ba,d(a.count),1)]))),128))])]),footer:r(()=>[Y(l(A,{label:"Cerrar","custom-class":"boton-cerrar"},null,512),[[W]])]),_:1},8,["modelValue"])])])]),_:1}))}},ja=ne(_a,[["__scopeId","data-v-eac72a1b"]]);export{ja as default};
