import{N as A,$ as E,a0 as P,a1 as I,m as _,a7 as M,y as N,x as j,_ as H,r as y,c as V,a as u,o as c,b as e,d as n,g as k,f as U,s as G,a9 as Q,h as p,F,p as O,t as D,v as K,l as L,j as z,ai as R}from"./index-D8k0Z2VW.js";import{Q as X}from"./QTooltip-BIz5X8HU.js";import{Q as Y}from"./QFile-DYrxQo6S.js";import{Q as J}from"./QPage-CDUm3vNP.js";import{T}from"./Table-DrGgNztj.js";import{M as W}from"./Modal-CwwUMTwV.js";import{B as w}from"./Button-ByZOtwGJ.js";import{B as Z}from"./BackButton-OAicZK4q.js";import{_ as aa}from"./ButtonTableOptions-ivpzFDPv.js";import{P as ea}from"./PageHeader-BZtJRD6F.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./QSelect-CCFBgF8v.js";import"./QItemLabel-BiKvV_tR.js";import"./format-DyQxkAtJ.js";import"./QList-D6hH9GPe.js";import"./QLinearProgress-C9Sex94R.js";const ta={position:{type:String,default:"bottom-right",validator:r=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(r)},offset:{type:Array,validator:r=>r.length===2},expand:Boolean};function oa(){const{props:r,proxy:{$q:f}}=A(),t=E(I,P);if(t===P)return console.error("QPageSticky needs to be child of QLayout"),P;const i=_(()=>{const s=r.position;return{top:s.indexOf("top")!==-1,right:s.indexOf("right")!==-1,bottom:s.indexOf("bottom")!==-1,left:s.indexOf("left")!==-1,vertical:s==="top"||s==="bottom",horizontal:s==="left"||s==="right"}}),v=_(()=>t.header.offset),g=_(()=>t.right.offset),x=_(()=>t.footer.offset),h=_(()=>t.left.offset),S=_(()=>{let s=0,b=0;const d=i.value,C=f.lang.rtl===!0?-1:1;d.top===!0&&v.value!==0?b=`${v.value}px`:d.bottom===!0&&x.value!==0&&(b=`${-x.value}px`),d.left===!0&&h.value!==0?s=`${C*h.value}px`:d.right===!0&&g.value!==0&&(s=`${-C*g.value}px`);const m={transform:`translate(${s}, ${b})`};return r.offset&&(m.margin=`${r.offset[1]}px ${r.offset[0]}px`),d.vertical===!0?(h.value!==0&&(m[f.lang.rtl===!0?"right":"left"]=`${h.value}px`),g.value!==0&&(m[f.lang.rtl===!0?"left":"right"]=`${g.value}px`)):d.horizontal===!0&&(v.value!==0&&(m.top=`${v.value}px`),x.value!==0&&(m.bottom=`${x.value}px`)),m}),$=_(()=>`q-page-sticky row flex-center fixed-${r.position} q-page-sticky--${r.expand===!0?"expand":"shrink"}`);function B(s){const b=M(s.default);return N("div",{class:$.value,style:S.value},r.expand===!0?b:[N("div",b)])}return{$layout:t,getStickyContent:B}}const la=j({name:"QPageSticky",props:ta,setup(r,{slots:f}){const{getStickyContent:t}=oa();return()=>t(f)}}),sa={class:"full-width row"},ia={class:"col-12"},na={class:"tabs-container"},ra={class:"contenido-principal"},ca={key:0,class:"tab-panel"},ua={class:"container"},da={class:"plantillas-grid"},pa={class:"plantilla-preview"},fa=["src","alt"],va={class:"plantilla-nombre"},ba={class:"plantilla-acciones"},ma={key:1,class:"tab-panel"},ga={key:2,class:"tab-panel upload-section"},ha={class:"modal-header-content"},_a={class:"modal-body-content"},ya={key:0,class:"archivos-lista"},ka={class:"archivo-nombre"},xa={key:1,class:"loading-container"},wa={class:"modal-footer-buttons"},Ca={__name:"Logbooks",setup(r){const f=y(null),t=y("aprobadas"),i=y([]),v=y(!1),g=y([{id:1,fecha:"08-08-2025",documento:"Carlos_Perez_11009667001"},{id:2,fecha:"08-08-2025",documento:"Carlos_Perez_11009667001"}]),x=y([{id:1,nombre:"Plantilla_Bitacora.PDF",url:"/plantillas/bitacora.pdf",imagen:"/img/preview-plantilla.png"}]),h=y([{name:"fecha",label:"FECHA",field:"fecha",align:"center",sortable:!0},{name:"documento",label:"DOCUMENTOS",field:"documento",align:"center",sortable:!0},{name:"acciones",label:"ACCIONES",field:"acciones",align:"center",actions:[{icon:"file_download",tooltip:"Descargar",action:a=>S(a)},{icon:"visibility",tooltip:"Visualizar",action:a=>$(a)}]}]),S=a=>{a.url&&window.open(a.url,"_blank")},$=a=>{a.url&&window.open(a.url,"_blank")},B=a=>{a.url&&window.open(a.url,"_blank")},s=a=>{a.url&&window.open(a.url,"_blank")},b=()=>{i.value=[],f.value?.openDialog()},d=()=>{i.value=[],f.value?.closeDialog()},C=a=>{i.value=a},m=async()=>{if(i.value.length!==0){v.value=!0;try{const a=new FormData;let o=0;for(;o<i.value.length;){const l=i.value[o];l&&a.append("bitacoras",l),o++}d()}catch{notifications.error("Error al subir las bitácoras")}finally{v.value=!1}}};return(a,o)=>(c(),V(J,{class:"q-pa-md logbooks-page"},{default:u(()=>[e(Z),n("div",sa,[n("div",ia,[e(U,{class:"shadow-1 hero-card q-mb-xl"},{default:u(()=>[e(G,null,{default:u(()=>[e(ea,{title:"Documentos y Carga de Bitácoras",description:"Gestiona plantillas, bitácoras aprobadas y sube nuevas bitácoras"})]),_:1})]),_:1})])]),n("div",na,[e(w,{class:Q(["tab-btn",{active:t.value==="plantillas"}]),label:"Plantillas",onClick:o[0]||(o[0]=l=>t.value="plantillas")},null,8,["class"]),e(w,{class:Q(["tab-btn",{active:t.value==="aprobadas"}]),label:"Bitácoras Aprobadas",onClick:o[1]||(o[1]=l=>t.value="aprobadas")},null,8,["class"]),e(w,{class:Q(["tab-btn",{active:t.value==="subir"}]),label:"Subir Bitácoras",onClick:o[2]||(o[2]=l=>t.value="subir")},null,8,["class"])]),n("div",ra,[t.value==="plantillas"?(c(),p("div",ca,[n("div",ua,[n("div",da,[(c(!0),p(F,null,O(x.value,l=>(c(),p("div",{key:l.id,class:"plantilla-card"},[n("div",pa,[l.imagen?(c(),p("img",{key:0,src:l.imagen,alt:l.nombre,class:"preview-image"},null,8,fa)):k("",!0)]),n("div",va,D(l.nombre),1),n("div",ba,[e(aa,{"show-edit":!1,"show-delete":!1,"custom-buttons":[{icon:"visibility",tooltip:"Visualizar",action:()=>s(l)},{icon:"file_download",tooltip:"Descargar",action:()=>B(l)}]},null,8,["custom-buttons"])])]))),128))])])])):k("",!0),t.value==="aprobadas"?(c(),p("div",ma,[e(T,{data:g.value,columns:h.value,"row-key":"id","no-data-label":"No hay bitácoras aprobadas","rows-per-page-options":[5,10,20],"initial-rows-per-page":5},null,8,["data","columns"])])):k("",!0),t.value==="subir"?(c(),p("div",ga,[e(T,{data:g.value,columns:h.value,"row-key":"id","no-data-label":"No hay bitácoras","rows-per-page-options":[5,10,20],"initial-rows-per-page":5},null,8,["data","columns"])])):k("",!0)]),t.value==="subir"?(c(),V(la,{key:0,position:"bottom-left",offset:[30,30]},{default:u(()=>[e(K,{fab:"",icon:"add",size:"lg",onClick:b,style:{"background-color":"var(--color-primary)",color:"white"}},{default:u(()=>[e(X,null,{default:u(()=>[...o[4]||(o[4]=[L("Subir bitácoras",-1)])]),_:1})]),_:1})]),_:1})):k("",!0),e(W,{ref_key:"uploadModal",ref:f},{header:u(()=>[n("div",ha,[o[5]||(o[5]=n("div",{class:"text-h6"},"Selecciona tus bitácoras",-1)),e(w,{flat:"",round:"",dense:"",icon:"close",color:"white",onClick:d})])]),default:u(()=>[n("div",_a,[e(Y,{modelValue:i.value,"onUpdate:modelValue":[o[3]||(o[3]=l=>i.value=l),C],multiple:"",outlined:"",dense:"",label:"Seleccionar archivos",accept:".pdf,.doc,.docx"},{prepend:u(()=>[e(z,{name:"attach_file"})]),hint:u(()=>[L(D(i.value.length>0?`${i.value.length} archivo(s) seleccionado(s)`:"Ningún archivo seleccionado"),1)]),_:1},8,["modelValue"]),i.value.length?(c(),p("div",ya,[(c(!0),p(F,null,O(i.value,(l,q)=>(c(),p("div",{key:q,class:"archivo-item"},[e(z,{name:"description",color:"grey-7"}),n("span",ka,D(l.name),1),e(z,{name:"check_circle",color:"green-7"})]))),128))])):k("",!0),v.value?(c(),p("div",xa,[e(R,{color:"green-7",size:"40px"}),o[6]||(o[6]=n("p",{class:"loading-text"},"Subiendo archivos...",-1))])):k("",!0)])]),footer:u(()=>[n("div",wa,[e(w,{label:"Cancelar","custom-class":"btn-cancelar",onClick:d}),e(w,{label:"Subir Bitácoras","custom-class":"btn-enviar",onClick:m,disable:i.value.length===0||v.value},null,8,["disable"])])]),_:1},512)]),_:1}))}},Ma=H(Ca,[["__scopeId","data-v-0a2d956f"]]);export{Ma as default};
