import{r as L,m as W,_ as Ga,w as xa,a5 as _a,c as ia,a as r,o as w,b as l,d as t,f as wa,s as Fa,g as Q,l as A,t as C,i as h,e as o,j as y,af as T,z as Ua,h as la,ae as Da,q as O}from"./index-D8k0Z2VW.js";import{Q as na}from"./QBanner-tZm71ZRY.js";import{Q as H}from"./QSelect-CCFBgF8v.js";import{Q as ja}from"./QBadge-pToOuXWH.js";import{Q as ra}from"./QTd-Dz2_L_T4.js";import{Q as Ja}from"./QForm-BHoNUr4c.js";import{Q as Ia}from"./QFile-DYrxQo6S.js";import{Q as ka}from"./QPage-CDUm3vNP.js";import{C as Qa}from"./ClosePopup-DkFGp95i.js";import{g as Oa}from"./apiClient-Vvvjylwf.js";import{u as Ha}from"./useEntityManager-6kUzRwOq.js";import{B as Za}from"./BackButton-OAicZK4q.js";import{T as $a}from"./Table-DrGgNztj.js";import{B as M}from"./Button-ByZOtwGJ.js";import{_ as Z}from"./ButtonTableOptions-ivpzFDPv.js";import{M as $}from"./Modal-CwwUMTwV.js";import{P as Ya}from"./PageHeader-BZtJRD6F.js";import{S as Y}from"./StatsCard-CWZ95buy.js";import"./QItemLabel-BiKvV_tR.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./useNotifications-C15CMF32.js";import"./QList-D6hH9GPe.js";import"./QLinearProgress-C9Sex94R.js";import"./QTooltip-BIz5X8HU.js";const g=[{departamento:"Amazonas",ciudades:["Leticia","Puerto Nariño","El Encanto","La Chorrera","La Pedrera","La Victoria","Miriti - Paraná","Puerto Alegría","Puerto Arica","Puerto Santander","Tarapacá"]},{departamento:"Antioquia",ciudades:["Medellín","Abejorral","Abriaquí","Alejandría","Amagá","Amalfi","Andes","Angelópolis","Angostura","Anorí","Anza","Apartadó","Arboletes","Argelia","Armenia","Barbosa","Bello","Belmira","Betania","Betulia","Briceño","Buriticá","Cáceres","Caicedo","Caldas","Campamento","Cañasgordas","Caracolí","Caramanta","Carepa","Carolina","Caucasia","Chigorodó","Cisneros","Cocorná","Concepción","Concordia","Copacabana","Dabeiba","Donmatías","Ebéjico","El Bagre","Entrerrios","Envigado","Fredonia","Frontino","Giraldo","Girardota","Gómez Plata","Granada","Guadalupe","Guarne","Guatapé","Heliconia","Hispania","Itagüí","Ituango","Jardín","Jericó","La Ceja","La Estrella","La Pintada","La Unión","Liborina","Maceo","Marinilla","Montebello","Murindó","Mutatá","Nariño","Nechí","Necoclí","Olaya","Peñol","Peque","Pueblorrico","Puerto Berrío","Puerto Nare","Puerto Triunfo","Remedios","Retiro","Rionegro","Sabanalarga","Sabaneta","Salgar","San Andrés de Cuerquía","San Carlos","San Francisco","San Jerónimo","San José de La Montaña","San Juan de Urabá","San Luis","San Pedro","San Pedro de Uraba","San Rafael","San Roque","San Vicente","Santa Bárbara","Santa Rosa de Osos","Santo Domingo","Segovia","Sonsón","Sopetrán","Támesis","Tarazá","Tarso","Titiribí","Toledo","Turbo","Uramita","Urrao","Valdivia","Valparaíso","Vegachí","Venecia","Vigía del Fuerte","Yalí","Yarumal","Yolombó","Yondó","Zaragoza"]},{departamento:"Arauca",ciudades:["Arauca","Arauquita","Cravo Norte","Fortul","Puerto Rondón","Saravena","Tame"]},{departamento:"Atlántico",ciudades:["Barranquilla","Baranoa","Campo de La Cruz","Candelaria","Galapa","Juan de Acosta","Luruaco","Malambo","Manatí","Palmar de Varela","Piojó","Polonuevo","Ponedera","Puerto Colombia","Repelón","Sabanagrande","Sabanalarga","Santa Lucía","Santo Tomás","Soledad","Suan","Tubará","Usiacurí"]},{departamento:"Bolívar",ciudades:["Cartagena","Achí","Altos del Rosario","Arenal","Arjona","Arroyohondo","Barranco de Loba","Calamar","Cantagallo","Cicuco","Clemencia","Córdoba","El Carmen de Bolívar","El Guamo","El Peñón","Hatillo de Loba","Magangué","Mahates","Margarita","María La Baja","Montecristo","Mompós","Morales","Norosí","Pinillos","Regidor","Río Viejo","San Cristóbal","San Estanislao","San Fernando","San Jacinto","San Jacinto del Cauca","San Juan Nepomuceno","San Martín de Loba","San Pablo","Santa Catalina","Santa Rosa","Santa Rosa del Sur","Simití","Soplaviento","Talaigua Nuevo","Tiquisio","Turbaco","Turbaná","Villanueva","Zambrano"]},{departamento:"Boyacá",ciudades:["Tunja","Almeida","Aquitania","Arcabuco","Belén","Berbeo","Betéitiva","Boavita","Boyacá","Briceño","Buenavista","Busbanzá","Caldas","Campohermoso","Cerinza","Chinavita","Chiquinquirá","Chíquiza","Chiscas","Chita","Chitaraque","Chivatá","Chivor","Ciénega","Cómbita","Coper","Corrales","Covarachía","Cubará","Cucaita","Cuítiva","Duitama","El Cocuy","El Espino","Firavitoba","Floresta","Gachantivá","Gameza","Garagoa","Guacamayas","Guateque","Guayatá","Güicán","Iza","Jenesano","Jericó","La Capilla","La Uvita","La Victoria","Labranzagrande","Macanal","Maripí","Miraflores","Mongua","Monguí","Moniquirá","Motavita","Muzo","Nobsa","Nuevo Colón","Oicatá","Otanche","Pachavita","Páez","Paipa","Pajarito","Panqueba","Pauna","Paya","Paz de Río","Pesca","Pisba","Puerto Boyacá","Quípama","Ramiriquí","Ráquira","Rondón","Saboyá","Sáchica","Samacá","San Eduardo","San José de Pare","San Luis de Gaceno","San Mateo","San Miguel de Sema","San Pablo de Borbur","Santa María","Santa Rosa de Viterbo","Santa Sofía","Santana","Sativanorte","Sativasur","Siachoque","Soatá","Socha","Socotá","Sogamoso","Somondoco","Sora","Soracá","Sotaquirá","Susacón","Sutamarchán","Sutatenza","Tasco","Tenza","Tibaná","Tibasosa","Tinjacá","Tipacoque","Toca","Togüí","Tópaga","Tota","Turmequé","Tuta","Tutazá","Umbita","Ventaquemada","Villa de Leyva","Viracachá","Zetaquira"]},{departamento:"Caldas",ciudades:["Manizales","Aguadas","Anserma","Aranzazu","Belalcázar","Chinchiná","Filadelfia","La Dorada","La Merced","Manzanares","Marmato","Marquetalia","Marulanda","Neira","Norcasia","Pácora","Palestina","Pensilvania","Riosucio","Risaralda","Salamina","Samaná","San José","Supía","Victoria","Villamaría","Viterbo"]},{departamento:"Caquetá",ciudades:["Florencia","Albania","Belén de Los Andaquies","Cartagena del Chairá","Curillo","El Doncello","El Paujil","La Montañita","Milán","Morelia","Puerto Rico","San José del Fragua","San Vicente del Caguán","Solano","Solita","Valparaíso"]},{departamento:"Casanare",ciudades:["Yopal","Aguazul","Chámeza","Hato Corozal","La Salina","Maní","Monterrey","Nunchía","Orocué","Paz de Ariporo","Pore","Recetor","Sabanalarga","Sácama","San Luis de Palenque","Támara","Tauramena","Trinidad","Villanueva"]},{departamento:"Cauca",ciudades:["Popayán","Almaguer","Argelia","Balboa","Bolívar","Buenos Aires","Cajibío","Caldono","Caloto","Corinto","El Tambo","Florencia","Guachené","Guapi","Inzá","Jambaló","La Sierra","La Vega","López","Mercaderes","Miranda","Morales","Padilla","Páez","Patía","Piamonte","Piendamó","Puerto Tejada","Puracé","Rosas","San Sebastián","Santander de Quilichao","Santa Rosa","Silvia","Sotara","Suárez","Sucre","Timbío","Timbiquí","Toribio","Totoró","Villa Rica"]},{departamento:"Cesar",ciudades:["Valledupar","Aguachica","Agustín Codazzi","Astrea","Becerril","Bosconia","Chimichagua","Chiriguaná","Curumaní","El Copey","El Paso","Gamarra","González","La Gloria","La Jagua de Ibirico","La Paz","Manaure","Pailitas","Pelaya","Pueblo Bello","Río de Oro","San Alberto","San Diego","San Martín","Tamalameque"]},{departamento:"Chocó",ciudades:["Quibdó","Acandí","Alto Baudó","Bagadó","Bahía Solano","Bajo Baudó","Bojaya","Carmen del Darién","Cértegui","Condoto","El Cantón del San Pablo","El Carmen de Atrato","El Litoral del San Juan","Istmina","Juradó","Lloró","Medio Atrato","Medio Baudó","Medio San Juan","Nóvita","Nuquí","Río Iró","Río Quito","Riosucio","San José del Palmar","Sipí","Tadó","Unguía","Unión Panamericana"]},{departamento:"Córdoba",ciudades:["Montería","Ayapel","Buenavista","Canalete","Cereté","Chimá","Chinú","Ciénaga de Oro","Cotorra","La Apartada","Lorica","Los Córdobas","Momil","Moñitos","Planeta Rica","Pueblo Nuevo","Puerto Escondido","Puerto Libertador","Purísima","Sahagún","San Andrés Sotavento","San Antero","San Bernardo del Viento","San Carlos","San José de Uré","San Pelayo","Tierralta","Tuchín","Valencia"]},{departamento:"Cundinamarca",ciudades:["Bogotá D.C.","Agua de Dios","Albán","Anapoima","Anolaima","Apulo","Arbeláez","Beltrán","Bituima","Bojacá","Cabrera","Cachipay","Cajicá","Caparrapí","Caqueza","Carmen de Carupa","Chaguaní","Chía","Chipaque","Choachí","Chocontá","Cogua","Cota","Cucunubá","El Colegio","El Peñón","El Rosal","Facatativá","Fómeque","Fosca","Funza","Fúquene","Fusagasugá","Gachalá","Gachancipá","Gachetá","Gama","Girardot","Granada","Guachetá","Guaduas","Guasca","Guataquí","Guatavita","Guayabal de Siquima","Guayabetal","Gutiérrez","Jerusalén","Junín","La Calera","La Mesa","La Palma","La Peña","La Vega","Lenguazaque","Machetá","Madrid","Manta","Medina","Mosquera","Nariño","Nemocón","Nilo","Nimaima","Nocaima","Pacho","Paime","Pandi","Paratebueno","Pasca","Puerto Salgar","Pulí","Quebradanegra","Quetame","Quipile","Ricaurte","San Antonio del Tequendama","San Bernardo","San Cayetano","San Francisco","San Juan de Río Seco","Sasaima","Sesquilé","Sibaté","Silvania","Simijaca","Soacha","Sopó","Subachoque","Suesca","Supatá","Susa","Sutatausa","Tabio","Tausa","Tena","Tenjo","Tibacuy","Tibirita","Tocaima","Tocancipá","Topaipí","Ubalá","Ubaque","Ubaté","Une","Útica","Vergara","Vianí","Villagómez","Villapinzón","Villeta","Viotá","Yacopí","Zipacón","Zipaquirá"]},{departamento:"Guainía",ciudades:["Inírida","Barranco Minas","Cacahual","La Guadalupe","Mapiripana","Morichal","Pana Pana","Puerto Colombia","San Felipe"]},{departamento:"Guaviare",ciudades:["San José del Guaviare","Calamar","El Retorno","Miraflores"]},{departamento:"Huila",ciudades:["Neiva","Acevedo","Agrado","Aipe","Algeciras","Altamira","Baraya","Campoalegre","Colombia","Elías","Garzón","Gigante","Guadalupe","Hobo","Íquira","Isnos","La Argentina","La Plata","Nátaga","Oporapa","Paicol","Palermo","Palestina","Pital","Pitalito","Rivera","Saladoblanco","San Agustín","Santa María","Suaza","Tarqui","Tesalia","Tello","Teruel","Timaná","Villavieja","Yaguará"]},{departamento:"La Guajira",ciudades:["Riohacha","Albania","Barrancas","Dibulla","Distracción","El Molino","Fonseca","Hatonuevo","La Jagua del Pilar","Maicao","Manaure","San Juan del Cesar","Uribia","Urumita","Villanueva"]},{departamento:"Magdalena",ciudades:["Santa Marta","Algarrobo","Aracataca","Ariguaní","Cerro San Antonio","Chivolo","Ciénaga","Concordia","El Banco","El Piñon","El Retén","Fundación","Guamal","Nueva Granada","Pedraza","Pijiño del Carmen","Pivijay","Plato","Puebloviejo","Remolino","Sabanas de San Angel","Salamina","San Sebastián de Buenavista","San Zenón","Santa Ana","Santa Bárbara de Pinto","Sitionuevo","Tenerife","Zapayán","Zona Bananera"]},{departamento:"Meta",ciudades:["Villavicencio","Acacías","Barranca de Upía","Cabuyaro","Castilla La Nueva","Cubarral","Cumaral","El Calvario","El Castillo","El Dorado","Fuente de Oro","Granada","Guamal","La Macarena","La Uribe","Lejanías","Mapiripán","Mesetas","Puerto Concordia","Puerto Gaitán","Puerto Lleras","Puerto López","Puerto Rico","Restrepo","San Carlos de Guaroa","San Juan de Arama","San Juanito","San Martín","Vistahermosa"]},{departamento:"Nariño",ciudades:["Pasto","Albán","Aldana","Ancuyá","Arboleda","Barbacoas","Belén","Buesaco","Colón","Consaca","Contadero","Córdoba","Cuaspud","Cumbal","Cumbitara","Chachagüí","El Charco","El Peñol","El Rosario","El Tablón de Gómez","El Tambo","Francisco Pizarro","Funes","Guachucal","Guaitarilla","Gualmatán","Iles","Imués","Ipiales","La Cruz","La Florida","La Llanada","La Tola","La Unión","Leiva","Linares","Los Andes","Magüí","Mallama","Mosquera","Nariño","Olaya Herrera","Ospina","Policarpa","Potosí","Providencia","Puerres","Pupiales","Ricaurte","Roberto Payán","Samaniego","San Bernardo","San Lorenzo","San Pablo","San Pedro de Cartago","Sandoná","Santa Bárbara","Santacruz","Sapuyes","Taminango","Tangua","Tumaco","Túquerres","Yacuanquer"]},{departamento:"Norte de Santander",ciudades:["Cúcuta","Abrego","Arboledas","Bochalema","Bucarasica","Cácota","Cáchira","Chinácota","Chitagá","Convención","Cucutilla","Durania","El Carmen","El Tarra","El Zulia","Gramalote","Hacarí","Herrán","La Esperanza","La Playa","Labateca","Los Patios","Lourdes","Mutiscua","Ocaña","Pamplona","Pamplonita","Puerto Santander","Ragonvalia","Salazar","San Calixto","San Cayetano","Santiago","Sardinata","Silos","Teorama","Tibú","Toledo","Villa Caro","Villa del Rosario"]},{departamento:"Putumayo",ciudades:["Mocoa","Colón","Orito","Puerto Asís","Puerto Caicedo","Puerto Guzmán","Puerto Leguízamo","San Francisco","San Miguel","Santiago","Sibundoy","Valle del Guamuez","Villagarzón"]},{departamento:"Quindío",ciudades:["Armenia","Buenavista","Calarcá","Circasia","Córdoba","Filandia","Génova","La Tebaida","Montenegro","Pijao","Quimbaya","Salento"]},{departamento:"Risaralda",ciudades:["Pereira","Apía","Balboa","Belén de Umbría","Dosquebradas","Guática","La Celia","La Virginia","Marsella","Mistrató","Pueblo Rico","Quinchía","Santa Rosa de Cabal","Santuario"]},{departamento:"San Andrés y Providencia",ciudades:["San Andrés","Providencia"]},{departamento:"Santander",ciudades:["Bucaramanga","Aguada","Albania","Aratoca","Barbosa","Barichara","Barrancabermeja","Betulia","Bolívar","Cabrera","California","Capitanejo","Carcasí","Cepitá","Cerrito","Charalá","Charta","Chima","Chipatá","Cimitarra","Concepción","Confines","Contratación","Coromoro","Curití","El Carmen de Chucurí","El Guacamayo","El Peñón","El Playón","Encino","Enciso","Florián","Floridablanca","Galán","Gambita","Girón","Guaca","Guadalupe","Guapotá","Guavatá","Güepsa","Hato","Jesús María","Jordán","La Belleza","La Paz","Landázuri","Lebríja","Los Santos","Macaravita","Málaga","Matanza","Mogotes","Molagavita","Ocamonte","Oiba","Onzaga","Palmar","Palmas del Socorro","Páramo","Piedecuesta","Pinchote","Puente Nacional","Puerto Parra","Puerto Wilches","Rionegro","Sabana de Torres","San Andrés","San Benito","San Gil","San Joaquín","San José de Miranda","San Miguel","San Vicente de Chucurí","Santa Bárbara","Santa Helena del Opón","Simacota","Socorro","Suaita","Sucre","Suratá","Tona","Valle de San José","Vélez","Vetas","Villanueva","Zapatoca"]},{departamento:"Sucre",ciudades:["Sincelejo","Buenavista","Caimito","Chalán","Colosó","Corozal","Coveñas","El Roble","Galeras","Guaranda","La Unión","Los Palmitos","Majagual","Morroa","Ovejas","Palmito","Sampués","San Benito Abad","San Juan de Betulia","San Marcos","San Onofre","San Pedro","Sincé","Sucre","Santiago de Tolú","Tolú Viejo"]},{departamento:"Tolima",ciudades:["Ibagué","Alpujarra","Alvarado","Ambalema","Anzoátegui","Armero","Ataco","Cajamarca","Carmen de Apicalá","Casabianca","Chaparral","Coello","Coyaima","Cunday","Dolores","Espinal","Falan","Flandes","Fresno","Guamo","Herveo","Honda","Icononzo","Lérida","Líbano","Mariquita","Melgar","Murillo","Natagaima","Ortega","Palocabildo","Piedras","Planadas","Prado","Purificación","Rioblanco","Roncesvalles","Rovira","Saldaña","San Antonio","San Luis","Santa Isabel","Suárez","Valle de San Juan","Venadillo","Villahermosa","Villarrica"]},{departamento:"Valle del Cauca",ciudades:["Cali","Alcalá","Andalucía","Ansermanuevo","Argelia","Bolívar","Buenaventura","Buga","Bugalagrande","Caicedonia","Calima","Candelaria","Cartago","Dagua","El Águila","El Cairo","El Cerrito","El Dovio","Florida","Ginebra","Guacarí","Jamundí","La Cumbre","La Unión","La Victoria","Obando","Palmira","Pradera","Restrepo","Riofrío","Roldanillo","San Pedro","Sevilla","Toro","Trujillo","Tuluá","Ulloa","Versalles","Vijes","Yotoco","Yumbo","Zarzal"]},{departamento:"Vaupés",ciudades:["Mitú","Carurú","Pacoa","Papunaua","Taraira","Yavaraté"]},{departamento:"Vichada",ciudades:["Puerto Carreño","Cumaribo","La Primavera","Santa Rosalía"]}];function Wa(){const q=L(""),R=W(()=>{const m=[];let d=0;for(;d<g.length;){const c=g[d];m.push({label:c.departamento,value:c.departamento}),d++}return m}),F=W(()=>{if(!q.value)return[];let m=0,d=null;for(;m<g.length&&!d;)g[m].departamento===q.value&&(d=g[m]),m++;return d?d.ciudades.sort():[]});function z(m){let d=0,c=null;for(;d<g.length&&!c;)g[d].departamento===m&&(c=g[d]),d++;return c?c.ciudades.sort():[]}function U(m,d){let c=0,b=null;for(;c<g.length&&!b;)g[c].departamento===d&&(b=g[c]),c++;if(!b)return!1;let f=0;for(;f<b.ciudades.length;){if(b.ciudades[f]===m)return!0;f++}return!1}function N(m){let d=0;for(;d<g.length;){const c=g[d];let b=0;for(;b<c.ciudades.length;){if(c.ciudades[b].toLowerCase()===m.toLowerCase())return c.departamento;b++}d++}return null}return{selectedDepartment:q,departments:R,cities:F,getCitiesByDepartment:z,validateCityDepartment:U,getDepartmentByCity:N,departamentos:R,getCiudadesByDepartamento:z,getDepartamentoByCiudad:N}}const Ka={class:"full-width row"},Xa={class:"col-12"},ae={class:"content-container"},ee={class:"stats-wrapper q-mb-lg"},te={class:"filters-wrapper flex items-center justify-between q-my-lg"},oe={class:"filters-left flex items-center bg-white"},ie={class:"filter-item search"},le={class:"filter-item status"},ne={class:"actions-right row items-center q-gutter-sm"},re={class:"q-pa-md flex flex-center column text-grey full-width"},se={class:"modal-header"},de={class:"text-h6 flex items-center"},ue={key:0,class:"modal-content-grid"},ce={class:"modal-column"},me={class:"data-grid"},pe={class:"data-row"},ve={class:"data-value"},Ce={class:"data-row"},ge={class:"data-value"},be={class:"data-row"},Se={class:"data-value"},Pe={class:"data-row"},he={class:"data-value"},ye={class:"modal-column"},fe={class:"data-grid"},Ae={class:"data-row"},Ve={class:"data-value"},Ee={class:"data-row"},Me={class:"data-value"},Le={class:"data-row"},Re={class:"data-value"},Be={class:"data-row"},Te={class:"data-value"},qe={class:"modal-header"},ze={class:"text-h6 flex items-center"},Ne={class:"modal-content-grid"},Ge={class:"modal-column"},xe={class:"modal-column"},_e={class:"row justify-end q-gutter-sm full-width"},we={class:"modal-header"},Fe={class:"text-h6 flex items-center"},Ue={class:"q-pa-md"},De={key:0,class:"q-my-md"},je={class:"q-mt-md flex justify-end"},Je={__name:"Companies",setup(q){const R=L(null),F=()=>({_id:"",companyNit:"",name:"",department:"",city:"",address:"",legalRepresentativeName:"",legalRepresentativePhone:"",legalRepresentativeEmail:"",legalRepresentativePosition:""}),z={list:"/companies/listCompanies",create:"/companies/saveCompanies",update:i=>`/companies/updateCompanies/${i}`,activate:i=>`/companies/activeCompanies/${i}`,deactivate:i=>`/companies/inActiveCompanies/${i}`,bulkUpload:"/companies/loadMassiveCompanie"},U={createSuccess:"Empresa creada correctamente",updateSuccess:"Empresa actualizada correctamente",listError:"Error al listar las empresas",statusSuccess:"Estado actualizado correctamente",statusError:"No fue posible cambiar el estado",bulkUploadSuccess:"Carga masiva realizada correctamente",bulkUploadError:"Error al cargar el archivo",noData:"No hay empresas registradas"},N=i=>{const a=i.city?.trim()||"",e=a?/colombia/i.test(a)?a:`${a}, Colombia`:"";return{companyNit:i.companyNit?.trim(),name:i.name?.trim(),location:e,address:i.address?.trim(),legalRepresentativeName:i.legalRepresentativeName?.trim(),legalRepresentativePhone:i.legalRepresentativePhone?.trim(),legalRepresentativeEmail:i.legalRepresentativeEmail?.trim(),legalRepresentativePosition:i.legalRepresentativePosition?.trim()}};function m(i){const a=i?.msg||i?.data||i||{};let e=a?.companies??a?.docs??a?.data??a?.companies??[];e&&typeof e=="object"&&!Array.isArray(e)&&(e=e.docs??e.items??e.data??[]),Array.isArray(e)||(e=[]);const u=a?.totalDocuments??a?.total??a?.totalItems??a?.count??i?.total??e.length;return{data:e,total:u}}const{loading:d,loadingTable:c,rows:b,showAddDialog:f,showDetailDialog:D,showUploadDialog:j,isEditMode:J,selectedEntity:sa,selectedFile:V,formData:n,filtersData:G,pagination:I,handlePaginationRequest:da,handleSearchChange:ua,handleStatusChange:ca,openFormDialog:ma,closeFormDialog:pa,openDetailsDialog:va,openBulkUploadDialog:Ca,handleAddDialogVisibility:ga,populateFormForEdit:ba,fetchEntities:Sa,submitForm:Pa,toggleStatus:ha,submitBulkUpload:ya}=Ha({entityName:"company",entityNamePlural:"companies",getDefaultFormData:F,endpoints:z,messages:U,buildPayload:N,processResponse:m}),x=b,v=sa,fa=ma,K=pa,Aa=va,X=Sa,Va=ha,Ea=async i=>{try{const a=i?.status;await Va(i);const e=a===0?1:0,u=x.value.findIndex(p=>p._id===(i._id||i.id));if(u!==-1&&(x.value[u].status=e),e===0){if(s.value.activeCount=Number(s.value.activeCount||0)+1,s.value.inactiveCount=Math.max(0,Number(s.value.inactiveCount||0)-1),!(s.value.activeList||[]).some(S=>S._id===(i._id||i.id))){const S=u!==-1?x.value[u]:i??{};s.value.activeList=[...s.value.activeList||[],S]}}else s.value.activeCount=Math.max(0,Number(s.value.activeCount||0)-1),s.value.inactiveCount=Number(s.value.inactiveCount||0)+1,s.value.activeList=(s.value.activeList||[]).filter(p=>p._id!==(i._id||i.id))}catch{}},aa=async()=>{if(await R.value?.validate())try{await Pa();try{await oa()}catch{}try{await X()}catch{}K()}catch{}},{departments:ea,getCitiesByDepartment:k,getDepartmentByCity:Ma}=Wa(),La=W(()=>{try{return(ea&&ea.value||[]).map(a=>a&&a.value||a)}catch{return[]}}),P=L([]),E=L(!1);xa(()=>n.value?.department,async i=>{const a=(i||"").toString().trim();if(a){const e=k(a);P.value=e||[],n.value&&!E.value&&(n.value.city="")}else P.value=[],n.value&&!E.value&&(n.value.city="")},{immediate:!0});async function Ra(i){await ba(i),await O();const a=n.value?.department||v?.department||i?.department||"",e=n.value?.city||v?.city||i?.city||"";if(a){E.value=!0;try{P.value=k(String(a))||[],n.value&&(n.value.department=a),e&&(P.value.includes(e),n.value&&(n.value.city=e))}finally{await O(),E.value=!1}return}const u=v?.location||i?.location||"";if(u){const p=u.split(",")[0].trim(),S=Ma(p);if(S){E.value=!0;try{n.value&&(n.value.department=S),P.value=k(S),P.value&&P.value.includes(p),n.value&&(n.value.city=p)}finally{await O(),E.value=!1}}}}const Ba=[{label:"Todos los estados",value:""},{label:"Activo",value:0},{label:"Inactivo",value:1}],Ta=[{name:"companyNit",label:"NIT",align:"center",field:"companyNit"},{name:"name",label:"Nombre",align:"center",field:"name"},{name:"location",label:"Locación",align:"center",field:"location"},{name:"legalRepresentativePhone",label:"Teléfono",align:"center",field:"legalRepresentativePhone"},{name:"legalRepresentativeName",label:"Nombre Jefe",align:"center",field:"legalRepresentativeName"},{name:"legalRepresentativeEmail",label:"Email",align:"center",field:"legalRepresentativeEmail"},{name:"legalRepresentativePosition",label:"Cargo",align:"center",field:"legalRepresentativePosition"},{name:"status",label:"Estado",align:"center",field:"status"},{name:"options",label:"Acciones",align:"center"}],qa=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,ta=/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,za=/^[0-9]{9,}$/,Na=/^3[0-9]{9}$/;_a(async()=>{await X(),oa().catch(()=>{})});const s=L({activeCount:0,inactiveCount:0,totalCount:0,activeList:[]}),B=L(""),oa=async()=>{B.value="";try{const i=await Oa("/statistics/companies/by-status"),a=i?.data??i;let e=a?.data?.active??a?.active??a?.msg?.active??a?.data?.totalActive;const u=a?.data?.companies??a?.companies??a?.data?.docs??a?.data?.activeCompanies??[],p=Array.isArray(u)?u:u&&typeof u=="object"?u.docs??u.items??[]:[];e==null&&Array.isArray(p)&&(e=p.length);const S=a?.data?.inactive??a?.inactive??a?.msg?.inactive??a?.data?.totalInactive??(a?.total?a.total-(e||0):0);let _=a?.total??a?.data?.total??null;_==null&&(_=Number(e||0)+Number(S||0)||(Array.isArray(p)?p.length:0)),s.value.activeCount=Number(e)||0,s.value.inactiveCount=Number(S)||0,s.value.activeList=p||[],s.value.totalCount=Number(_)||0}catch(i){const a=i?.response?.data??i?.data??i?.message??i;try{B.value=typeof a=="string"?a:JSON.stringify(a)}catch{B.value=String(a)}s.value.activeCount=0,s.value.inactiveCount=0,s.value.totalCount=0,s.value.activeList=[]}};return(i,a)=>(w(),ia(ka,{class:"q-pa-md companies-page"},{default:r(()=>[l(Za,{class:"q-mb-lg"}),t("div",Ka,[t("div",Xa,[l(wa,{class:"shadow-1 hero-card q-mb-md"},{default:r(()=>[l(Fa,null,{default:r(()=>[l(Ya,{title:"Gestión de Empresas",description:"Lista, crea y administra las empresas registradas en el sistema."})]),_:1})]),_:1}),t("div",ae,[B.value?(w(),ia(na,{key:0,class:"q-mb-md bg-red-1 text-red-8",rounded:""},{default:r(()=>[A(C(B.value),1)]),_:1})):Q("",!0),t("div",ee,[l(Y,{title:"EMPRESAS ACTIVAS",value:s.value.activeCount??0,color:"#39A900"},null,8,["value"]),l(Y,{title:"TOTAL EMPRESAS",value:s.value.totalCount??0,color:"#39A900"},null,8,["value"]),l(Y,{title:"EMPRESAS INACTIVAS",value:s.value.inactiveCount??0,color:"#39A900"},null,8,["value"])]),t("div",te,[t("div",oe,[t("div",ie,[l(h,{modelValue:o(G).search,"onUpdate:modelValue":[a[0]||(a[0]=e=>o(G).search=e),o(ua)],outlined:"",dense:"",clearable:"",debounce:"600",placeholder:"Buscar por nombre o NIT..."},{prepend:r(()=>[l(y,{name:"search",color:"green-8"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),t("div",le,[l(H,{modelValue:o(G).status,"onUpdate:modelValue":[a[1]||(a[1]=e=>o(G).status=e),o(ca)],options:Ba,outlined:"",dense:"","emit-value":"","map-options":"",clearable:"",label:"Filtrar por Estado"},{prepend:r(()=>[l(y,{name:"filter_list",color:"green-8"})]),_:1},8,["modelValue","onUpdate:modelValue"])])]),t("div",ne,[l(M,{label:"Carga Masiva","custom-class":"gradient-btn",icon:"cloud_upload",onClick:o(Ca)},null,8,["onClick"]),l(M,{label:"Añadir Empresa","custom-class":"gradient-btn",icon:"domain_add",onClick:o(fa)},null,8,["onClick"])])]),l($a,{card:"",rows:o(x),columns:Ta,pagination:o(I),"onUpdate:pagination":a[2]||(a[2]=e=>T(I)?I.value=e:null),"loanding-table":o(c),"row-key":"_id",onRequest:o(da)},{"body-cell-status":r(e=>[l(ra,{props:e},{default:r(()=>[l(ja,{color:e.row.status===0?"positive":"negative",class:"text-uppercase"},{default:r(()=>[A(C(e.row.status===0?"Activa":"Inactiva"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-options":r(e=>[l(ra,{props:e,class:"text-center table-options"},{default:r(()=>[l(Z,{icon:"edit",color:"grey-7",tooltip:"Editar",onClick:u=>Ra(e.row)},null,8,["onClick"]),l(Z,{icon:e.row.status===0?"block":"check_circle",color:e.row.status===0?"negative":"positive",tooltip:e.row.status===0?"Desactivar":"Activar",onClick:u=>Ea(e.row)},null,8,["icon","color","tooltip","onClick"]),l(Z,{icon:"visibility",color:"grey",tooltip:"Ver",onClick:u=>o(Aa)(e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":r(()=>[t("div",re,[l(y,{name:"business",size:"2.5em",color:"positive"}),a[16]||(a[16]=t("div",{class:"text-subtitle2 q-mt-sm"}," No hay empresas registradas ",-1))])]),_:1},8,["rows","pagination","loanding-table","onRequest"])]),l($,{modelValue:o(D),"onUpdate:modelValue":a[3]||(a[3]=e=>T(D)?D.value=e:null),variant:"view",width:"900px","max-width":"90vw"},{header:r(()=>[t("div",se,[t("div",de,[l(y,{name:"business",class:"q-mr-sm"}),A(" "+C(o(v)?.name||"Empresa"),1)])])]),body:r(()=>[o(v)?(w(),la("div",ue,[t("div",ce,[a[21]||(a[21]=t("div",{class:"section-title"},"Datos de la empresa",-1)),t("div",me,[t("div",pe,[a[17]||(a[17]=t("div",{class:"text-weight-bold"},"Número NIT:",-1)),t("div",ve,C(o(v)?.companyNit||"-"),1)]),t("div",Ce,[a[18]||(a[18]=t("div",{class:"text-weight-bold"},"Razón social:",-1)),t("div",ge,C(o(v)?.name||"-"),1)]),t("div",be,[a[19]||(a[19]=t("div",{class:"text-weight-bold"},"Ubicación:",-1)),t("div",Se,C(o(v)?.location||"-"),1)]),t("div",Pe,[a[20]||(a[20]=t("div",{class:"text-weight-bold"},"Dirección:",-1)),t("div",he,C(o(v)?.address||"-"),1)])])]),t("div",ye,[a[26]||(a[26]=t("div",{class:"section-title"},"Contacto de la empresa",-1)),t("div",fe,[t("div",Ae,[a[22]||(a[22]=t("div",{class:"text-weight-bold"},"Jefe inmediato:",-1)),t("div",Ve,C(o(v)?.legalRepresentativeName||"-"),1)]),t("div",Ee,[a[23]||(a[23]=t("div",{class:"text-weight-bold"},"Cargo:",-1)),t("div",Me,C(o(v)?.legalRepresentativePosition||"-"),1)]),t("div",Le,[a[24]||(a[24]=t("div",{class:"text-weight-bold"},"Teléfono:",-1)),t("div",Re,C(o(v)?.legalRepresentativePhone||"-"),1)]),t("div",Be,[a[25]||(a[25]=t("div",{class:"text-weight-bold"},"Email:",-1)),t("div",Te,C(o(v)?.legalRepresentativeEmail||"-"),1)])])])])):Q("",!0)]),footer:r(()=>[Ua(l(M,{label:"Cerrar","custom-class":"boton-cerrar"},null,512),[[Qa]])]),_:1},8,["modelValue"]),l($,{modelValue:o(f),"onUpdate:modelValue":[a[13]||(a[13]=e=>T(f)?f.value=e:null),o(ga)],variant:"edit",width:"900px","max-width":"95vw",persistent:""},{header:r(()=>[t("div",qe,[t("div",ze,[l(y,{name:"business",class:"q-mr-sm"}),A(" "+C(o(J)?"Editar Empresa":"Añadir nueva empresa"),1)])])]),body:r(()=>[l(Ja,{ref_key:"companyFormRef",ref:R,onSubmit:Da(aa,["prevent"]),greedy:"","no-error-focus":""},{default:r(()=>[t("div",Ne,[t("div",Ge,[a[27]||(a[27]=t("div",{class:"section-title"},"Datos de la empresa",-1)),l(h,{modelValue:o(n).companyNit,"onUpdate:modelValue":a[4]||(a[4]=e=>o(n).companyNit=e),filled:"",dense:"",label:"Número NIT *",disable:o(J),"lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"El NIT es requerido",e=>za.test(e)||"El NIT debe contener solo números y mínimo 9 dígitos"]},null,8,["modelValue","disable","rules"]),l(h,{modelValue:o(n).name,"onUpdate:modelValue":a[5]||(a[5]=e=>o(n).name=e),filled:"",dense:"",label:"Razón social *","lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"El nombre es requerido",e=>ta.test(e)||"El nombre solo debe contener letras"]},null,8,["modelValue","rules"]),l(H,{modelValue:o(n).department,"onUpdate:modelValue":a[6]||(a[6]=e=>o(n).department=e),filled:"",dense:"",label:"Departamento *",options:La.value,"lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"El departamento es requerido"]},null,8,["modelValue","options","rules"]),l(H,{modelValue:o(n).city,"onUpdate:modelValue":a[7]||(a[7]=e=>o(n).city=e),filled:"",dense:"",label:"Ciudad *",options:P.value,disable:!o(n).department,"menu-props":{zIndex:9999,cover:!0},"lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"La ciudad es requerida"]},null,8,["modelValue","options","disable","rules"]),l(h,{modelValue:o(n).address,"onUpdate:modelValue":a[8]||(a[8]=e=>o(n).address=e),filled:"",dense:"",label:"Dirección *","lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"La dirección es requerida"]},null,8,["modelValue","rules"])]),t("div",xe,[a[28]||(a[28]=t("div",{class:"section-title"},"Contacto de la empresa",-1)),l(h,{modelValue:o(n).legalRepresentativeName,"onUpdate:modelValue":a[9]||(a[9]=e=>o(n).legalRepresentativeName=e),filled:"",dense:"",label:"Jefe inmediato *","lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"El jefe inmediato es requerido",e=>ta.test(e)||"El nombre solo debe contener letras"]},null,8,["modelValue","rules"]),l(h,{modelValue:o(n).legalRepresentativePosition,"onUpdate:modelValue":a[10]||(a[10]=e=>o(n).legalRepresentativePosition=e),filled:"",dense:"",label:"Cargo *","lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"El cargo es requerido"]},null,8,["modelValue","rules"]),l(h,{modelValue:o(n).legalRepresentativePhone,"onUpdate:modelValue":a[11]||(a[11]=e=>o(n).legalRepresentativePhone=e),filled:"",dense:"",label:"Teléfono *",mask:"##########","lazy-rules":"",class:"q-mb-md",rules:[e=>!!e||"El teléfono es requerido",e=>Na.test(e)||"El teléfono debe tener 10 dígitos y comenzar con 3"]},null,8,["modelValue","rules"]),l(h,{modelValue:o(n).legalRepresentativeEmail,"onUpdate:modelValue":a[12]||(a[12]=e=>o(n).legalRepresentativeEmail=e),filled:"",dense:"",label:"Email *",type:"email","lazy-rules":"",class:"q-mb-md",rules:[e=>!!e?.trim()||"El email es requerido",e=>qa.test((e||"").trim())||"Email inválido"]},null,8,["modelValue","rules"])])])]),_:1},512)]),footer:r(()=>[t("div",_e,[l(M,{"custom-class":"boton-cerrar",label:"Cancelar",onClick:o(K)},null,8,["onClick"]),l(M,{label:o(J)?"Actualizar":"Añadir Empresa",type:"submit","custom-class":"gradient-btn",loading:o(d),onClick:aa},null,8,["label","loading"])])]),_:1},8,["modelValue","onUpdate:modelValue"]),l($,{modelValue:o(j),"onUpdate:modelValue":a[15]||(a[15]=e=>T(j)?j.value=e:null),width:"600px","max-width":"95vw",persistent:""},{header:r(()=>[t("div",we,[t("div",Fe,[l(y,{name:"cloud_upload",class:"q-mr-sm"}),a[29]||(a[29]=A(" Carga Masiva de Empresas ",-1))])])]),body:r(()=>[t("div",Ue,[a[31]||(a[31]=t("div",{class:"q-mb-md"},[t("p",{class:"text-body1 q-mb-sm"}," Sube un archivo Excel (.xlsx) o CSV (.csv) con la información de las empresas. "),t("p",{class:"text-caption text-grey-7"}," El archivo debe contener las siguientes columnas: NIT, Razón Social, Ubicación, Nombre Representante, Cargo, Teléfono, Email. ")],-1)),l(Ia,{modelValue:o(V),"onUpdate:modelValue":a[14]||(a[14]=e=>T(V)?V.value=e:null),outlined:"",label:"Seleccionar archivo",accept:".xlsx,.xls,.csv","max-file-size":"5242880",clearable:""},{prepend:r(()=>[l(y,{name:"attach_file"})]),hint:r(()=>[...a[30]||(a[30]=[A(" Formatos permitidos: Excel (.xlsx, .xls) o CSV (.csv). Tamaño máximo: 5MB. ",-1)])]),_:1},8,["modelValue"]),o(V)?(w(),la("div",De,[l(na,{class:"bg-green-1 text-green-8",rounded:""},{avatar:r(()=>[l(y,{name:"check_circle",color:"green"})]),default:r(()=>[A(" Archivo seleccionado: "+C(o(V).name),1)]),_:1})])):Q("",!0),t("div",je,[l(M,{label:"Subir Archivo","custom-class":"gradient-btn",loading:o(d),disable:!o(V),onClick:o(ya)},null,8,["loading","disable","onClick"])])])]),_:1},8,["modelValue"])])])]),_:1}))}},Ct=Ga(Je,[["__scopeId","data-v-ee8e051c"]]);export{Ct as default};
