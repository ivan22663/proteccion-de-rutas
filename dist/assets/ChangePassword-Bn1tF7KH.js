import{_ as b,r as c,c as h,a as t,u as E,o as C,b as s,d as o,Q as w,e as p,f as Q,i as y,k as P,l as x}from"./index-D8k0Z2VW.js";import{Q as B,a as k,l as N,b as R,c as V,d as A}from"./LogoSENABlanco-CtklxWB6.js";import{Q as I}from"./QPageContainer-CjE1gXqS.js";import{a as q}from"./apiClient-Vvvjylwf.js";import{u as H}from"./useNotifications-C15CMF32.js";import{B as T}from"./BackButton-OAicZK4q.js";import{B as $}from"./Button-ByZOtwGJ.js";import{l as F}from"./logo-sena-BV4FM39N.js";const L={class:"header-content"},z=["src"],D={class:"main-wrapper"},G={class:"back-button-wrapper"},S={class:"content-center"},K={class:"logo-section"},M=["src"],O={class:"input-section"},Z={class:"button-section"},j={__name:"ChangePassword",setup(U){const g=E(),u=H(),r=c(""),d=c(!1),i=c(!1),n=c(""),v=a=>{if(!a)return!1;const e=a.toLowerCase().trim(),l=/^[a-zA-Z0-9._-]+@gmail\.com$/,_=/^[a-zA-Z0-9._-]+@(hotmail|outlook)\.(com|es)$/;return l.test(e)||_.test(e)},m=()=>r.value?v(r.value)?(i.value=!1,n.value="",!0):(i.value=!0,n.value="Debe ser un correo válido de Gmail o Hotmail (ejemplo: usuario@gmail.com)",!1):(i.value=!0,n.value="El correo es requerido",!1),f=async()=>{if(!m()){u.error("Por favor ingrese un correo de Gmail o Hotmail válido");return}d.value=!0;try{const a=await q(`/apprentices/resetPassword/${r.value}`);u.success(a.msg||a.message||`Correo de restablecimiento enviado a: ${r.value}`),g.push({path:"/IngresarCodigoContrasena",query:{email:r.value}})}catch(a){let e="Error al enviar el correo. Intenta nuevamente.";a.response?(console.error("Error del servidor:",a.response.data),e=a.response.data.msg||a.response.data.message||a.response.data.error||`Error ${a.response.status}: No se pudo enviar el correo`):a.request?e="No se pudo conectar con el servidor. Verifica tu conexión.":e=a.message,u.error(e)}finally{d.value=!1}};return(a,e)=>(C(),h(B,{view:"hHh lpR fFf"},{default:t(()=>[s(k,{elevated:"",class:"text-white header-custom"},{default:t(()=>[o("div",L,[s(w,{class:"header-avatar"},{default:t(()=>[o("img",{src:p(N),class:"avatar-img"},null,8,z)]),_:1}),e[1]||(e[1]=o("span",{class:"header-title"},"REPFORA EP",-1))])]),_:1}),s(I,{class:"page-container"},{default:t(()=>[o("div",D,[o("div",G,[s(T)]),o("div",S,[s(Q,{class:"recovery-card",flat:""},{default:t(()=>[o("div",K,[o("img",{src:p(F),alt:"Logo SENA",class:"logo-img"},null,8,M)]),e[2]||(e[2]=o("div",{class:"title-section"}," Cambia tu Contraseña ",-1)),e[3]||(e[3]=o("div",{class:"description-section"}," Ingrese la dirección de correo electrónico verificada de su cuenta de usuario y le enviaremos un enlace para restablecer su contraseña. ",-1)),e[4]||(e[4]=o("div",{class:"label-section"}," Correo electrónico: ",-1)),o("div",O,[s(y,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),type:"email",placeholder:"karoluquez12@gmail.com",outlined:"",dense:"",class:"email-input",error:i.value,"error-message":n.value,onBlur:m,onInput:m,onKeyup:P(f,["enter"]),rules:[l=>!!l||"El correo es requerido",l=>v(l)||"Debe ser un correo de Gmail o Hotmail válido"]},null,8,["modelValue","error","error-message","rules"])]),o("div",Z,[s($,{label:"Enviar correo electrónico de restablecimiento",onClick:f,loading:d.value,disable:i.value||!r.value},null,8,["loading","disable"])])]),_:1})])])]),_:1}),s(R,{class:"footer-custom"},{default:t(()=>[s(V,{class:"footer-toolbar"},{default:t(()=>[s(A,{class:"text-center footer-text"},{default:t(()=>[...e[5]||(e[5]=[x(" REPFORA - Sena 2025 © Todos los derechos reservados ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}))}},re=b(j,[["__scopeId","data-v-1d1bcbbc"]]);export{re as default};
