import{aj as ze,x as Se,N as De,ak as Ie,m as N,y as F,al as qe,_ as Ve,r as b,a5 as je,u as $e,c as ee,a as g,o as f,b as o,d as t,f as Ee,s as Te,h,ai as Me,j as u,t as n,g as I,a9 as Fe,F as te,p as de,z as ue,l as q,ae as Re,i as U}from"./index-D8k0Z2VW.js";import{Q as Be}from"./QTooltip-BIz5X8HU.js";import{Q as Ue}from"./QLinearProgress-C9Sex94R.js";import{b as Qe}from"./format-DyQxkAtJ.js";import{Q as Oe}from"./QForm-BHoNUr4c.js";import{Q as Je}from"./QPage-CDUm3vNP.js";import{C as ve}from"./ClosePopup-DkFGp95i.js";import{u as Ge}from"./authStore-BiRtblIW.js";import{u as Le}from"./useNotifications-C15CMF32.js";import{g as L,a as We}from"./apiClient-Vvvjylwf.js";import{M as W}from"./Modal-CwwUMTwV.js";import{B as V}from"./Button-ByZOtwGJ.js";import{B as He}from"./BackButton-OAicZK4q.js";import{P as Ke}from"./PageHeader-BZtJRD6F.js";import{S as H}from"./StatsCard-CWZ95buy.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";const Xe={...ze,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:c=>c>=0&&c<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},ae=50,me=2*ae,pe=me*Math.PI,Ye=Math.round(pe*1e3)/1e3,Ze=Se({name:"QCircularProgress",props:{...Xe,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(c,{slots:R}){const{proxy:{$q:w}}=De(),K=Ie(c),Q=N(()=>{const _=(w.lang.rtl===!0?-1:1)*c.angle;return{transform:c.reverse!==(w.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-_}deg)`:`rotate3d(0, 0, 1, ${_-90}deg)`}}),X=N(()=>c.instantFeedback!==!0&&c.indeterminate!==!0?{transition:`stroke-dashoffset ${c.animationSpeed}ms ease 0s, stroke ${c.animationSpeed}ms ease`}:""),C=N(()=>me/(1-c.thickness/2)),S=N(()=>`${C.value/2} ${C.value/2} ${C.value} ${C.value}`),P=N(()=>Qe(c.value,c.min,c.max)),z=N(()=>c.max-c.min),A=N(()=>c.thickness/2*C.value),y=N(()=>{const _=(c.max-P.value)/z.value,m=c.rounded===!0&&P.value<c.max&&_<.25?A.value/2*(1-_/.25):0;return pe*_+m});function D({thickness:_,offset:m,color:p,cls:j,rounded:k}){return F("circle",{class:"q-circular-progress__"+j+(p!==void 0?` text-${p}`:""),style:X.value,fill:"transparent",stroke:"currentColor","stroke-width":_,"stroke-dasharray":Ye,"stroke-dashoffset":m,"stroke-linecap":k,cx:C.value,cy:C.value,r:ae})}return()=>{const _=[];c.centerColor!==void 0&&c.centerColor!=="transparent"&&_.push(F("circle",{class:`q-circular-progress__center text-${c.centerColor}`,fill:"currentColor",r:ae-A.value/2,cx:C.value,cy:C.value})),c.trackColor!==void 0&&c.trackColor!=="transparent"&&_.push(D({cls:"track",thickness:A.value,offset:0,color:c.trackColor})),_.push(D({cls:"circle",thickness:A.value,offset:y.value,color:c.color,rounded:c.rounded===!0?"round":void 0}));const m=[F("svg",{class:"q-circular-progress__svg",style:Q.value,viewBox:S.value,"aria-hidden":"true"},_)];return c.showValue===!0&&m.push(F("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:c.fontSize}},R.default!==void 0?R.default():[F("div",P.value)])),F("div",{class:`q-circular-progress q-circular-progress--${c.indeterminate===!0?"in":""}determinate`,style:K.value,role:"progressbar","aria-valuemin":c.min,"aria-valuemax":c.max,"aria-valuenow":c.indeterminate===!0?void 0:P.value},qe(R.internal,m))}}}),et={class:"full-width row"},tt={class:"col-12"},at={class:"stats-section q-mb-xl"},st={key:0,class:"stats-loading"},ot={key:1,class:"stats-grid"},it={class:"datos-container"},rt={class:"page-header-section"},lt={class:"datos-content"},nt={class:"datos-info-card"},ct={class:"card-header"},dt={class:"datos-list"},ut={class:"datos-item"},vt={class:"datos-item-label"},mt={class:"datos-item-value"},pt={class:"datos-item"},ft={class:"datos-item-label"},gt={class:"datos-item-value"},ht={class:"datos-item"},_t={class:"datos-item-label"},bt={class:"datos-item-value"},yt={class:"datos-item"},xt={class:"datos-item-label"},wt={class:"datos-item-value"},kt={class:"datos-info-card"},Ct={class:"card-header"},At={class:"datos-list"},Nt={class:"datos-item"},Pt={class:"datos-item-label"},zt={class:"datos-item-value"},St={class:"datos-item"},Dt={class:"datos-item-label"},It={class:"datos-item-value ficha-badge"},qt={class:"datos-item programa-item"},Vt={class:"datos-item-label"},jt={style:{padding:"8px","word-wrap":"break-word"}},$t={class:"datos-instructores"},Et={key:0,class:"no-instructores-message"},Tt={class:"instructor-circle"},Mt={class:"instructor-nombre"},Ft={class:"modal-title-white"},Rt={class:"stats-modal-content"},Bt={key:0,class:"detail-section"},Ut={class:"section-title q-mb-md"},Qt={class:"detail-cards-grid"},Ot={class:"detail-info-card"},Jt={class:"detail-card-icon",style:{background:"var(--color-primary)"}},Gt={class:"detail-card-content"},Lt={class:"detail-card-value"},Wt={class:"detail-info-card"},Ht={class:"detail-card-icon",style:{background:"#2e7d32"}},Kt={class:"detail-card-content"},Xt={class:"detail-card-value success"},Yt={class:"detail-info-card"},Zt={class:"detail-card-icon",style:{background:"#ed6c02"}},ea={class:"detail-card-content"},ta={class:"detail-card-value warning"},aa={class:"detail-info-card"},sa={class:"detail-card-icon",style:{background:"#d32f2f"}},oa={class:"detail-card-content"},ia={class:"detail-card-value error"},ra={key:0,class:"additional-info q-mt-lg"},la={class:"info-box"},na={class:"info-box-content"},ca={class:"info-box-value"},da={key:1,class:"detail-section"},ua={class:"section-title q-mb-md"},va={class:"completion-summary"},ma={class:"summary-card success-card"},pa={class:"summary-number"},fa={class:"summary-percentage"},ga={class:"progress-bars q-mt-lg"},ha={class:"progress-item"},_a={class:"progress-label"},ba={class:"progress-value"},ya={key:2,class:"detail-section"},xa={class:"section-title q-mb-md"},wa={class:"completion-summary"},ka={class:"summary-card warning-card"},Ca={class:"summary-number"},Aa={class:"summary-percentage"},Na={key:0,class:"alert-box warning-alert q-mt-lg"},Pa={class:"alert-content"},za={class:"alert-message"},Sa={key:1,class:"alert-box error-alert q-mt-md"},Da={class:"alert-content"},Ia={class:"alert-message"},qa={key:3,class:"detail-section"},Va={class:"section-title q-mb-md"},ja={class:"progress-overview"},$a={class:"progress-circle-container"},Ea={class:"progress-circle"},Ta={class:"progress-circle-content"},Ma={class:"progress-circle-value"},Fa={class:"progress-stats"},Ra={class:"stat-row"},Ba={class:"stat-icon",style:{background:"var(--color-primary)"}},Ua={class:"stat-info"},Qa={class:"stat-value"},Oa={class:"stat-row"},Ja={class:"stat-icon",style:{background:"#2e7d32"}},Ga={class:"stat-info"},La={class:"stat-value"},Wa={class:"stat-row"},Ha={class:"stat-icon",style:{background:"#ed6c02"}},Ka={class:"stat-info"},Xa={class:"stat-value"},Ya={class:"stat-row"},Za={class:"stat-icon",style:{background:"#d32f2f"}},es={class:"stat-info"},ts={class:"stat-value"},as={key:0,class:"projects-info q-mt-lg"},ss={class:"projects-card"},os={class:"projects-content"},is={class:"projects-number"},rs={class:"projects-label"},ls={class:"modal-header"},ns={class:"text-h6 flex items-center"},cs={class:"modal-content-grid"},ds={class:"modal-column"},us={class:"modal-column"},vs={class:"row justify-end q-gutter-sm full-width"},ms={class:"modal-header"},ps={class:"text-h6 flex items-center"},fs={class:"row justify-end q-gutter-sm full-width"},gs={class:"modal-header"},hs={class:"text-h6 flex items-center"},_s={class:"tabla-contenedor"},bs={class:"tabla-instructores"},ys=["href"],xs=300*1e3,ws={__name:"PersonalData",setup(c){const R=$e(),w=Ge(),{success:K,error:Q,warning:X,info:C}=Le(),S=()=>({_id:"",correo:"",telefono:""}),P=b(!1),z=b(!1),A=b(!1),y=b(S()),D=b(S()),_=b([]),m=b([{nombre:"Cargando...",telefono:"-",correo:"-"}]),p=b({totalActivities:0,completedActivities:0,pendingActivities:0,progressPercentage:0}),j=b(!0),k=b({personal:null,progress:null,lastFetch:null}),Y=b(!1),$=b(""),d=b({total:0,approved:0,pending:0,rejected:0,activeProjects:0}),se=N(()=>{const a={total:{title:"Detalle Total de Actividades",icon:"assignment"},completed:{title:"Actividades Completadas",icon:"check_circle"},pending:{title:"Actividades Pendientes",icon:"pending_actions"},progress:{title:"AnÃ¡lisis de Progreso",icon:"trending_up"}};return a[$.value]||a.total}),fe=a=>!!a||"Este campo es requerido",ge=a=>a?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||"Email invÃ¡lido":!0,he=a=>a?/^3\d{9}$/.test(a)||"El telÃ©fono debe tener 10 dÃ­gitos y comenzar con 3":!0,l=N(()=>w.user),oe=b(!1),Z=b(null),ie=()=>k.value.lastFetch?Date.now()-k.value.lastFetch<xs:!1,O=a=>{if($.value=a,Y.value=!0,ie()&&k.value.personal){console.log("ðŸ“¦ Modal cargado desde cachÃ© (instantÃ¡neo)");return}console.log("â„¹ï¸ Mostrando datos actuales en modal")},J=(a,e)=>!e||e===0?0:Math.round(a/e*100),re=()=>{y.value=S(),D.value=S()},_e=a=>a?{_id:a._id||"",correo:a.email?.personal||"",telefono:G(a.phone||"")}:S(),G=a=>!a&&a!==0?"":String(a).replace(/[^0-9]/g,""),be=()=>{const a=_e(l.value);y.value={...a},D.value={...a},z.value=!0},ye=()=>{z.value=!1,re()};async function le(){if(Z.value&&!await Z.value.validate()){X("Por favor, completa correctamente todos los campos requeridos.");return}const a=G(D.value.telefono),e=(D.value.correo||"").trim(),s=G(y.value.telefono),i=(y.value.correo||"").trim();y.value.telefono=s;const v=[];if(i!==e&&v.push({campo:"Correo personal",anterior:e||"(vacÃ­o)",nuevo:i||"(vacÃ­o)"}),s!==a&&v.push({campo:"TelÃ©fono",anterior:a||"(vacÃ­o)",nuevo:s||"(vacÃ­o)"}),v.length===0){C("No se han realizado cambios.");return}_.value=v,z.value=!1,A.value=!0}const xe=()=>{A.value=!1,z.value=!0};async function we(){P.value=!0;try{const a=w.user?._id||w.user?.id||w.user?.uid;if(!a){Q("No se pudo identificar al usuario para actualizar.");return}const e=G(y.value.telefono),s=(y.value.correo||"").trim();await We("/apprentices/updatePartApprentice",{_id:a,phone:e,email:s});const v={...l.value,phone:e,email:{...l.value?.email||{},personal:s,institutional:l.value?.email?.institutional||""}};w.setUser(v);try{const r=JSON.parse(localStorage.getItem("auth")||"{}");localStorage.setItem("auth",JSON.stringify({...r,user:v}))}catch(r){console.warn("No se pudo sincronizar el usuario en localStorage:",r)}A.value=!1,re(),K("Â¡Tus datos han sido guardados permanentemente!")}catch(a){console.error("Error al actualizar datos:",a);const e=a.response?.data?.msg||a.response?.data?.message||(Array.isArray(a.response?.data?.errors)?a.response.data.errors.join(". "):null)||a.message||"No se pudo guardar la informaciÃ³n. IntÃ©ntalo de nuevo.";Q(e)}finally{P.value=!1}}function ke(a){if(!a||a==="Cargando...")return"?";const e=a.trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():a.substring(0,2).toUpperCase()}function Ce(a){if(a?.fichaNumber)return a.fichaNumber;if(a?.ficha||a?.fiche)return a.ficha||a.fiche;if(a?.recordNumber&&Array.isArray(a.recordNumber)&&a.recordNumber.length>0){let e=null,s=0;for(;s<a.recordNumber.length&&!e;)a.recordNumber[s]&&a.recordNumber[s].status===0&&(e=a.recordNumber[s]),s++;if(!e&&a.recordNumber.length>0&&(e=a.recordNumber[0]),e?.fiche&&typeof e.fiche=="object"&&e.fiche.number)return e.fiche.number;if(e?.fiche)return"Ficha asignada"}return""}function E(a){if(a?.programName)return a.programName;if(a?.programa)return typeof a.programa=="string"?a.programa:a.programa?.name||"";if(a?.recordNumber&&Array.isArray(a.recordNumber)&&a.recordNumber.length>0){let e=null,s=0;for(;s<a.recordNumber.length&&!e;)a.recordNumber[s]&&a.recordNumber[s].status===0&&(e=a.recordNumber[s]),s++;if(!e&&a.recordNumber.length>0&&(e=a.recordNumber[0]),e?.fiche&&typeof e.fiche=="object"){if(e.fiche.program?.name)return e.fiche.program.name;if(e.fiche.program)return"Programa asociado"}}return""}function ne(a){if(!a)return null;if(typeof a=="string")return a;if(a.$oid)return a.$oid;if(a._id){if(typeof a._id=="string")return a._id;if(a._id.$oid)return a._id.$oid}return null}function ce(a){try{if(!a||typeof a!="string")return null;const e=a.split(".")[1];if(!e)return null;const s=e.replace(/-/g,"+").replace(/_/g,"/"),i=typeof window<"u"&&typeof window.atob=="function"&&window.atob.bind(window)||typeof globalThis<"u"&&typeof globalThis.atob=="function"&&globalThis.atob.bind(globalThis);if(!i)return console.warn("No se pudo decodificar el token: atob no estÃ¡ disponible en este entorno."),null;const v=i(s);let r="",x=0;for(;x<v.length;){const T=v.charCodeAt(x).toString(16).padStart(2,"0");r+="%"+T,x++}const B=decodeURIComponent(r);return JSON.parse(B)}catch(e){return console.error("Error al decodificar JWT:",e),null}}async function Ae(){try{if(j.value=!0,ie()&&k.value.personal&&k.value.progress){const v=k.value.personal,r=k.value.progress;v&&(p.value.totalActivities=v.activities?.total||0,p.value.completedActivities=v.activities?.approved||0,p.value.pendingActivities=v.activities?.pending||0,d.value={total:v.activities?.total||0,approved:v.activities?.approved||0,pending:v.activities?.pending||0,rejected:v.activities?.rejected||0,activeProjects:v.activeProjects||0}),r&&(p.value.progressPercentage=Math.round(r.progressPercentage||0)),console.log("ðŸ“Š EstadÃ­sticas cargadas desde cachÃ©"),j.value=!1;return}console.log("ðŸ”„ Cargando estadÃ­sticas desde API...");const[a,e]=await Promise.all([L("/statistics/apprentice/personal-stats"),L("/statistics/apprentice/activities-progress")]),s=a?.data||a?.msg||a,i=e?.data||e?.msg||e;k.value.personal=s,k.value.progress=i,k.value.lastFetch=Date.now(),s&&(p.value.totalActivities=s.activities?.total||0,p.value.completedActivities=s.activities?.approved||0,p.value.pendingActivities=s.activities?.pending||0,d.value={total:s.activities?.total||0,approved:s.activities?.approved||0,pending:s.activities?.pending||0,rejected:s.activities?.rejected||0,activeProjects:s.activeProjects||0}),i&&(p.value.progressPercentage=Math.round(i.progressPercentage||0),s||(p.value.totalActivities=i.totalActivities||0,p.value.completedActivities=i.completedActivities||0,p.value.pendingActivities=i.pendingActivities||0,d.value={total:i.totalActivities||0,approved:i.completedActivities||0,pending:i.pendingActivities||0,rejected:0,activeProjects:0})),console.log("âœ… EstadÃ­sticas cargadas")}catch(a){console.error("âŒ Error al cargar estadÃ­sticas:",a),p.value={totalActivities:0,completedActivities:0,pendingActivities:0,progressPercentage:0},d.value={total:0,approved:0,pending:0,rejected:0,activeProjects:0}}finally{j.value=!1}}async function Ne(){try{if(l.value?.recordNumber&&Array.isArray(l.value.recordNumber)&&l.value.recordNumber.length>0&&l.value?.fichaNumber&&l.value?.programName)return;const a=JSON.parse(localStorage.getItem("auth")||"{}"),e=w.token||a?.token;if(!e)return;let s=null,i=null;try{const r=w.token||a?.token||e,x=ce(r||e),B=x?.uid?._id||x?.uid?.id||l.value?._id||l.value?.id,T=await L("/apprentices/apprenticeById");if(T){const M=T?.data||T?.msg||T;Array.isArray(M)&&M.length>0?s=M[0]:M&&typeof M=="object"&&(s=M),s&&(i=s.recordNumber||[])}}catch{const x=ce(e);s=x?.uid||x?.user||null,s&&(i=s.recordNumber||[])}if(!s)if(l.value?.recordNumber)s=l.value,i=l.value.recordNumber;else return;!i&&l.value?.recordNumber&&(i=l.value.recordNumber);const v={...l.value,...s||{},recordNumber:i||l.value?.recordNumber||[]};if(i&&Array.isArray(i)&&i.length>0){let r=null,x=0;for(;x<i.length;){if(i[x].status===0){r=i[x];break}x++}if(!r&&i.length>0&&(r=i[0]),r?.fiche&&typeof r.fiche=="object"&&!Array.isArray(r.fiche))r.fiche.number&&!v.fichaNumber&&(v.fichaNumber=r.fiche.number),r.fiche.program&&(typeof r.fiche.program=="object"&&r.fiche.program.name?v.programName=r.fiche.program.name:typeof r.fiche.program=="string"&&(v.programId=r.fiche.program)),v.ficheId=r.fiche._id||ne(r.fiche);else{const B=ne(r?.fiche);B&&(v.ficheId=B)}}w.setUser(v)}catch(a){console.error("Error al cargar datos completos del aprendiz:",a)}}async function Pe(){try{m.value=[{nombre:"Cargando...",telefono:"-",correo:"-"}];const a=l.value?.ficheId||l.value?.recordNumber?.[0]?.fiche?._id;if(!a){m.value=[];return}try{const e=await L(`/fiches/ficheById/${a}`),s=e?.data||e?.msg||e,i=s?.instructors||s?.instructor||s?.Instructor||[];if(!i||Array.isArray(i)&&i.length===0){m.value=[];return}const v=Array.isArray(i)?i:[i];m.value=v.map(r=>({nombre:r.name||r.Name||`${r.firstName||""} ${r.lastName||""}`.trim()||"Instructor",telefono:r.phone||r.Phone||r.phoneNumber||"-",correo:r.email?.institutional||r.email?.personal||r.email||r.Email||"-"})),m.value=m.value.filter(r=>r.nombre&&r.nombre!=="Instructor")}catch{if(l.value?.instructors||l.value?.instructor){const s=l.value?.instructors||[l.value?.instructor];m.value=s.map(i=>({nombre:i.name||i.Name||`${i.firstName||""} ${i.lastName||""}`.trim()||"Instructor",telefono:i.phone||i.Phone||"-",correo:i.email?.institutional||i.email?.personal||i.email||"-"})),m.value=m.value.filter(i=>i.nombre&&i.nombre!=="Instructor")}else m.value=[]}}catch(a){console.error("Error al cargar instructores:",a),m.value=[]}}return je(async()=>{if(!w.isAuthenticated){notifications.warning("Debes iniciar sesiÃ³n para acceder a esta pÃ¡gina"),R.push("/login");return}console.log("ðŸš€ Iniciando carga de datos personales..."),await Promise.all([Ne(),Pe(),Ae()]),console.log("âœ… Datos personales cargados")}),(a,e)=>(f(),ee(Je,{class:"q-pa-md personal-data-page"},{default:g(()=>[o(He),t("div",et,[t("div",tt,[o(Ee,{class:"shadow-1 hero-card q-mb-xl"},{default:g(()=>[o(Te,null,{default:g(()=>[o(Ke,{title:"Mis Datos Personales",description:"Consulta y actualiza tu informaciÃ³n personal y acadÃ©mica"})]),_:1})]),_:1})])]),t("div",at,[j.value?(f(),h("div",st,[o(Me,{color:"primary",size:"3em"}),e[13]||(e[13]=t("p",{class:"q-mt-md text-grey-7"},"Cargando estadÃ­sticas...",-1))])):(f(),h("div",ot,[o(H,{title:"Total de Actividades",value:p.value.totalActivities,color:"var(--color-primary)",icon:"assignment",class:"cursor-pointer stats-card-clickable",onClick:e[0]||(e[0]=s=>O("total"))},null,8,["value"]),o(H,{title:"Actividades Completadas",value:p.value.completedActivities,color:"var(--color-primary)",icon:"check_circle",class:"cursor-pointer stats-card-clickable",onClick:e[1]||(e[1]=s=>O("completed"))},null,8,["value"]),o(H,{title:"Actividades Pendientes",value:p.value.pendingActivities,color:"var(--color-primary)",icon:"pending_actions",class:"cursor-pointer stats-card-clickable",onClick:e[2]||(e[2]=s=>O("pending"))},null,8,["value"]),o(H,{title:"Progreso",value:`${p.value.progressPercentage}%`,icon:"trending_up",class:"cursor-pointer stats-card-clickable",onClick:e[3]||(e[3]=s=>O("progress"))},null,8,["value"])]))]),t("div",it,[t("div",rt,[t("div",{class:"editar-datos-link",onClick:be},[o(u,{name:"edit",size:"20px",class:"icon-editar"}),e[14]||(e[14]=t("span",{class:"edit-text"},"Editar",-1))])]),t("div",lt,[t("div",nt,[t("div",ct,[o(u,{name:"person",size:"24px",color:"#44b900"}),e[15]||(e[15]=t("h3",{class:"card-title"},"InformaciÃ³n Personal",-1))]),t("div",dt,[t("div",ut,[t("div",vt,[o(u,{name:"badge",size:"18px",class:"item-icon"}),e[16]||(e[16]=t("span",null,"Nombre Completo",-1))]),t("div",mt,n(l.value?.firstName||"-")+" "+n(l.value?.lastName||""),1)]),t("div",pt,[t("div",ft,[o(u,{name:"credit_card",size:"18px",class:"item-icon"}),e[17]||(e[17]=t("span",null,"Documento",-1))]),t("div",gt,n(l.value?.documentNumber||"-"),1)]),t("div",ht,[t("div",_t,[o(u,{name:"email",size:"18px",class:"item-icon"}),e[18]||(e[18]=t("span",null,"Correo Personal",-1))]),t("div",bt,n(l.value?.email?.personal||"-"),1)]),t("div",yt,[t("div",xt,[o(u,{name:"business",size:"18px",class:"item-icon"}),e[19]||(e[19]=t("span",null,"Correo Institucional",-1))]),t("div",wt,n(l.value?.email?.institutional||"-"),1)])])]),t("div",kt,[t("div",Ct,[o(u,{name:"school",size:"24px",color:"#44b900"}),e[20]||(e[20]=t("h3",{class:"card-title"},"InformaciÃ³n AcadÃ©mica",-1))]),t("div",At,[t("div",Nt,[t("div",Pt,[o(u,{name:"phone",size:"18px",class:"item-icon"}),e[21]||(e[21]=t("span",null,"TelÃ©fono",-1))]),t("div",zt,n(l.value?.phone||"-"),1)]),t("div",St,[t("div",Dt,[o(u,{name:"description",size:"18px",class:"item-icon"}),e[22]||(e[22]=t("span",null,"Ficha",-1))]),t("div",It,n(Ce(l.value)||"-"),1)]),t("div",qt,[t("div",Vt,[o(u,{name:"book",size:"18px",class:"item-icon"}),e[23]||(e[23]=t("span",null,"Programa",-1))]),E(l.value)&&E(l.value).length>50?(f(),ee(Be,{key:0,"max-width":"400px",anchor:"top middle",self:"bottom middle"},{default:g(()=>[t("div",jt,n(E(l.value)),1)]),_:1})):I("",!0),t("div",{class:Fe(E(l.value)&&E(l.value).length>50?"datos-item-value programa-text":"datos-item-value"),style:{cursor:"help"}},n(E(l.value)||"-"),3)])])]),t("div",$t,[e[25]||(e[25]=t("div",{class:"datos-label instructores-title"},"Instructores Asignados",-1)),!m.value||m.value.length===0||m.value.length===1&&m.value[0].nombre==="Cargando..."?(f(),h("div",Et,[o(u,{name:"info",size:"32px",color:"grey-6",class:"q-mb-sm"}),e[24]||(e[24]=t("p",{class:"text-grey-7 text-center"},"No tienes instructores asignados en este momento.",-1))])):(f(),h(te,{key:1},[(f(!0),h(te,null,de(m.value,(s,i)=>(f(),h("div",{key:i,class:"instructor-card"},[t("div",Tt,n(ke(s.nombre)),1),t("div",Mt,n(s.nombre),1)]))),128)),o(V,{label:"Contactar","custom-class":"gradient-btn",noCaps:!0,onClick:a.abrirModalContactar},null,8,["onClick"])],64))])])]),o(W,{modelValue:Y.value,"onUpdate:modelValue":e[4]||(e[4]=s=>Y.value=s),width:"900px","max-width":"95vw"},{header:g(()=>[o(u,{name:se.value.icon,class:"q-mr-sm"},null,8,["name"]),t("span",Ft,n(se.value.title),1)]),body:g(()=>[t("div",Rt,[$.value==="total"?(f(),h("div",Bt,[t("div",Ut,[o(u,{name:"info",class:"q-mr-sm"}),e[26]||(e[26]=q(" Desglose Completo de Actividades ",-1))]),t("div",Qt,[t("div",Ot,[t("div",Jt,[o(u,{name:"assignment",size:"32px",color:"white"})]),t("div",Gt,[e[27]||(e[27]=t("div",{class:"detail-card-label"},"Total de Actividades",-1)),t("div",Lt,n(d.value.total||0),1)])]),t("div",Wt,[t("div",Ht,[o(u,{name:"check_circle",size:"32px",color:"white"})]),t("div",Kt,[e[28]||(e[28]=t("div",{class:"detail-card-label"},"Aprobadas",-1)),t("div",Xt,n(d.value.approved||0),1)])]),t("div",Yt,[t("div",Zt,[o(u,{name:"pending",size:"32px",color:"white"})]),t("div",ea,[e[29]||(e[29]=t("div",{class:"detail-card-label"},"Pendientes",-1)),t("div",ta,n(d.value.pending||0),1)])]),t("div",aa,[t("div",sa,[o(u,{name:"cancel",size:"32px",color:"white"})]),t("div",oa,[e[30]||(e[30]=t("div",{class:"detail-card-label"},"Rechazadas",-1)),t("div",ia,n(d.value.rejected||0),1)])])]),d.value.activeProjects!==void 0?(f(),h("div",ra,[t("div",la,[o(u,{name:"folder_open",size:"28px",color:"primary"}),t("div",na,[e[31]||(e[31]=t("span",{class:"info-box-label"},"Proyectos Activos:",-1)),t("span",ca,n(d.value.activeProjects),1)])])])):I("",!0)])):$.value==="completed"?(f(),h("div",da,[t("div",ua,[o(u,{name:"info",class:"q-mr-sm"}),e[32]||(e[32]=q(" Detalle de Actividades Completadas ",-1))]),t("div",va,[t("div",ma,[o(u,{name:"check_circle",size:"64px"}),t("div",pa,n(d.value.approved||0),1),e[33]||(e[33]=t("div",{class:"summary-label"},"Actividades Aprobadas",-1)),t("div",fa,n(J(d.value.approved,d.value.total))+"% ",1)])]),t("div",ga,[t("div",ha,[t("div",_a,[e[34]||(e[34]=t("span",null,"Tasa de Completitud",-1)),t("span",ba,n(J(d.value.approved,d.value.total))+"%",1)]),o(Ue,{value:J(d.value.approved,d.value.total)/100,color:"positive",size:"20px",rounded:""},null,8,["value"])])])])):$.value==="pending"?(f(),h("div",ya,[t("div",xa,[o(u,{name:"info",class:"q-mr-sm"}),e[35]||(e[35]=q(" Detalle de Actividades Pendientes ",-1))]),t("div",wa,[t("div",ka,[o(u,{name:"pending_actions",size:"64px"}),t("div",Ca,n(d.value.pending||0),1),e[36]||(e[36]=t("div",{class:"summary-label"},"Actividades por Completar",-1)),t("div",Aa,n(J(d.value.pending,d.value.total))+"% ",1)])]),d.value.pending>0?(f(),h("div",Na,[o(u,{name:"warning",size:"32px"}),t("div",Pa,[e[37]||(e[37]=t("div",{class:"alert-title"},"Â¡AtenciÃ³n!",-1)),t("div",za," Tienes "+n(d.value.pending)+" "+n(d.value.pending===1?"actividad pendiente":"actividades pendientes")+" por completar. Te recomendamos ponerte al dÃ­a lo antes posible. ",1)])])):I("",!0),d.value.rejected>0?(f(),h("div",Sa,[o(u,{name:"error",size:"32px"}),t("div",Da,[e[38]||(e[38]=t("div",{class:"alert-title"},"Actividades Rechazadas",-1)),t("div",Ia," Tienes "+n(d.value.rejected)+" "+n(d.value.rejected===1?"actividad rechazada":"actividades rechazadas")+". Revisa los comentarios del instructor y vuÃ©lvelas a enviar. ",1)])])):I("",!0)])):$.value==="progress"?(f(),h("div",qa,[t("div",Va,[o(u,{name:"info",class:"q-mr-sm"}),e[39]||(e[39]=q(" AnÃ¡lisis de Progreso General ",-1))]),t("div",ja,[t("div",$a,[t("div",Ea,[o(Ze,{value:p.value.progressPercentage,size:"200px",thickness:.15,color:"primary","track-color":"grey-3","show-value":"",class:"text-primary"},{default:g(()=>[t("div",Ta,[t("div",Ma,n(p.value.progressPercentage)+"%",1),e[40]||(e[40]=t("div",{class:"progress-circle-label"},"Completado",-1))])]),_:1},8,["value"])])]),t("div",Fa,[t("div",Ra,[t("div",Ba,[o(u,{name:"assignment",color:"white",size:"24px"})]),t("div",Ua,[e[41]||(e[41]=t("div",{class:"stat-label"},"Total",-1)),t("div",Qa,n(d.value.total||0),1)])]),t("div",Oa,[t("div",Ja,[o(u,{name:"check_circle",color:"white",size:"24px"})]),t("div",Ga,[e[42]||(e[42]=t("div",{class:"stat-label"},"Completadas",-1)),t("div",La,n(d.value.approved||0),1)])]),t("div",Wa,[t("div",Ha,[o(u,{name:"pending",color:"white",size:"24px"})]),t("div",Ka,[e[43]||(e[43]=t("div",{class:"stat-label"},"Pendientes",-1)),t("div",Xa,n(d.value.pending||0),1)])]),t("div",Ya,[t("div",Za,[o(u,{name:"cancel",color:"white",size:"24px"})]),t("div",es,[e[44]||(e[44]=t("div",{class:"stat-label"},"Rechazadas",-1)),t("div",ts,n(d.value.rejected||0),1)])])])]),d.value.activeProjects!==void 0?(f(),h("div",as,[t("div",ss,[o(u,{name:"work",size:"48px",color:"primary"}),t("div",os,[t("div",is,n(d.value.activeProjects),1),t("div",rs,n(d.value.activeProjects===1?"Proyecto Activo":"Proyectos Activos"),1)])])])):I("",!0)])):I("",!0)])]),footer:g(()=>[ue(o(V,{label:"Cerrar","custom-class":"boton-cerrar"},null,512),[[ve]])]),_:1},8,["modelValue"]),o(W,{modelValue:z.value,"onUpdate:modelValue":e[10]||(e[10]=s=>z.value=s),variant:"edit",width:"900px","max-width":"95vw",persistent:""},{header:g(()=>[t("div",ls,[t("div",ns,[o(u,{name:"edit",class:"q-mr-sm"}),e[45]||(e[45]=q(" Editar Mis Datos ",-1))])])]),body:g(()=>[y.value.correo!==null?(f(),ee(Oe,{key:0,ref_key:"formRef",ref:Z,onSubmit:Re(le,["prevent"])},{default:g(()=>[t("div",cs,[t("div",ds,[e[46]||(e[46]=t("div",{class:"section-title"},"InformaciÃ³n Personal",-1)),o(U,{modelValue:l.value.firstName,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.firstName=s),filled:"",dense:"",label:"Nombre",readonly:"",class:"input-readonly"},null,8,["modelValue"]),o(U,{modelValue:l.value.lastName,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.lastName=s),filled:"",dense:"",label:"Apellido",readonly:"",class:"input-readonly"},null,8,["modelValue"]),o(U,{modelValue:y.value.correo,"onUpdate:modelValue":e[7]||(e[7]=s=>y.value.correo=s),filled:"",dense:"",label:"Correo Personal",type:"email",class:"input-editable",rules:[ge]},null,8,["modelValue","rules"])]),t("div",us,[e[47]||(e[47]=t("div",{class:"section-title"},"InformaciÃ³n de Contacto",-1)),o(U,{modelValue:y.value.telefono,"onUpdate:modelValue":e[8]||(e[8]=s=>y.value.telefono=s),filled:"",dense:"",label:"TelÃ©fono *",class:"input-editable",rules:[fe,he]},null,8,["modelValue","rules"]),o(U,{modelValue:l.value.email.institutional,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.email.institutional=s),filled:"",dense:"",label:"Correo Institucional",readonly:"",class:"input-readonly"},null,8,["modelValue"])])])]),_:1},512)):I("",!0)]),footer:g(()=>[t("div",vs,[o(V,{"custom-class":"boton-cerrar",label:"Cancelar",onClick:ye}),o(V,{label:"Guardar cambios","custom-class":"gradient-btn",onClick:le})])]),_:1},8,["modelValue"]),o(W,{modelValue:A.value,"onUpdate:modelValue":e[11]||(e[11]=s=>A.value=s),variant:"view",width:"600px","max-width":"90vw",persistent:""},{header:g(()=>[t("div",ms,[t("div",ps,[o(u,{name:"help_outline",class:"q-mr-sm"}),e[48]||(e[48]=q(" Confirmar Cambios ",-1))])])]),body:g(()=>[...e[49]||(e[49]=[t("div",{class:"q-pa-md text-center"},[t("div",{class:"text-h6 q-mb-md"},"Â¿EstÃ¡ seguro de que desea guardar los cambios?")],-1)])]),footer:g(()=>[t("div",fs,[o(V,{"custom-class":"boton-cerrar",label:"Cancelar",onClick:xe}),o(V,{label:"Aceptar","custom-class":"gradient-btn",loading:P.value,onClick:we},null,8,["loading"])])]),_:1},8,["modelValue"]),o(W,{modelValue:oe.value,"onUpdate:modelValue":e[12]||(e[12]=s=>oe.value=s),variant:"view",width:"800px","max-width":"95vw"},{header:g(()=>[t("div",gs,[t("div",hs,[o(u,{name:"contact_phone",class:"q-mr-sm"}),e[50]||(e[50]=q(" Contacto Instructor ",-1))])])]),body:g(()=>[t("div",_s,[t("table",bs,[e[51]||(e[51]=t("thead",null,[t("tr",null,[t("th",null,"Nombre:"),t("th",null,"TelÃ©fono:"),t("th",null,"Correo:")])],-1)),t("tbody",null,[(f(!0),h(te,null,de(m.value,(s,i)=>(f(),h("tr",{key:i},[t("td",null,n(s.nombre),1),t("td",null,n(s.telefono),1),t("td",null,[t("a",{href:"mailto:"+s.correo,class:"correo-link"},n(s.correo),9,ys)])]))),128))])])])]),footer:g(()=>[ue(o(V,{label:"Cerrar","custom-class":"boton-cerrar"},null,512),[[ve]])]),_:1},8,["modelValue"])]),_:1}))}},Rs=Ve(ws,[["__scopeId","data-v-de0b8098"]]);export{Rs as default};
