import{_ as R,a5 as U,c as I,a as n,o as m,b as s,d as l,f as M,s as P,i as S,e as a,j as u,af as p,h as $,g as j,l as z}from"./index-D8k0Z2VW.js";import{Q as F}from"./QSelect-CCFBgF8v.js";import{Q as H}from"./QTd-Dz2_L_T4.js";import{Q as L}from"./QPage-CDUm3vNP.js";import{u as O}from"./useEntityManager-6kUzRwOq.js";import{B as G}from"./BackButton-OAicZK4q.js";import{P as J}from"./PageHeader-BZtJRD6F.js";import{T as K}from"./Table-DrGgNztj.js";import{B as W}from"./Button-ByZOtwGJ.js";import{_ as X}from"./ButtonTableOptions-ivpzFDPv.js";import{M as Y}from"./Modal-CwwUMTwV.js";import"./QItemLabel-BiKvV_tR.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./apiClient-Vvvjylwf.js";import"./useNotifications-C15CMF32.js";import"./QList-D6hH9GPe.js";import"./QLinearProgress-C9Sex94R.js";import"./QTooltip-BIz5X8HU.js";const Z={class:"full-width row"},ee={class:"col-12"},te={class:"container"},oe={class:"filters-wrapper row items-center q-mb-md q-gutter-y-sm"},se={class:"col-12 col-md-6"},ae={class:"col-12 col-md-6"},ne={class:"q-pa-md flex flex-center column text-grey full-width"},le={key:0,class:"row q-col-gutter-lg"},re={__name:"Documents",setup(ie){const f=()=>({_id:"",name:"",type:"",description:"",status:""}),g={list:"/documents/list"},b={listError:"Error al cargar documentos",noData:"No hay documentos registrados"},v=c=>{function e(t){return Array.isArray(t)?t:t?.documents&&Array.isArray(t.documents)?t.documents:t?.msg&&Array.isArray(t.msg)?t.msg:t?.data&&Array.isArray(t.data)?t.data:t?.data?.documents&&Array.isArray(t.data.documents)?t.data.documents:[]}const o=e(c);return{data:o,total:o.length}},{loadingTable:_,rows:h,showDetailDialog:r,selectedEntity:D,filtersData:i,pagination:d,handlePaginationRequest:w,handleSearchChange:y,handleStatusChange:V,openDetailsDialog:x,fetchEntities:A}=O({entityName:"document",entityNamePlural:"documents",getDefaultFormData:f,endpoints:g,messages:b,processResponse:v}),q=h,C=D,B=_,Q=x,k=A,N=c=>{Q(c)},E=[{label:"Todos los estados",value:""},{label:"Activo",value:"active"},{label:"Inactivo",value:"inactive"}],T=[{name:"name",align:"left",label:"Nombre",field:"name",sortable:!0},{name:"type",align:"left",label:"Tipo",field:"type",sortable:!0},{name:"description",align:"left",label:"Descripción",field:"description",sortable:!0},{name:"status",align:"center",label:"Estado",field:"status",sortable:!0},{name:"acciones",align:"center",label:"Acciones",field:"acciones"}];return U(async()=>{await k()}),(c,e)=>(m(),I(L,{class:"q-pa-md documents-page"},{default:n(()=>[s(G,{class:"q-mb-lg"}),l("div",Z,[l("div",ee,[s(M,{class:"shadow-1 hero-card q-mb-xl"},{default:n(()=>[s(P,null,{default:n(()=>[s(J,{title:"Documentos",description:"Carga y gestión de documentos y anexos."})]),_:1})]),_:1})])]),l("div",te,[l("div",oe,[l("div",se,[s(S,{modelValue:a(i).search,"onUpdate:modelValue":[e[0]||(e[0]=o=>a(i).search=o),a(y)],dense:"",outlined:"",placeholder:"Buscar documento...",debounce:"600",clearable:""},{append:n(()=>[s(u,{name:"search"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),l("div",ae,[s(F,{modelValue:a(i).status,"onUpdate:modelValue":[e[1]||(e[1]=o=>a(i).status=o),a(V)],options:E,label:"Estado",outlined:"",dense:"",clearable:"","emit-value":"","map-options":"","option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue"])])]),s(K,{card:"",rows:a(q),columns:T,pagination:a(d),"onUpdate:pagination":e[2]||(e[2]=o=>p(d)?d.value=o:null),"loanding-table":a(B),"row-key":"_id",onRequest:a(w)},{"body-cell-acciones":n(o=>[s(H,{props:o,class:"text-center table-options"},{default:n(()=>[s(X,{icon:"visibility",color:"grey",tooltip:"Ver detalles",onClick:t=>N(o.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":n(()=>[l("div",ne,[s(u,{name:"description",size:"2.5em",color:"positive"}),e[5]||(e[5]=l("div",{class:"text-subtitle2 q-mt-sm"}," No hay documentos registrados ",-1))])]),_:1},8,["rows","pagination","loanding-table","onRequest"])]),s(Y,{modelValue:a(r),"onUpdate:modelValue":e[4]||(e[4]=o=>p(r)?r.value=o:null),width:"1200px","max-width":"98vw"},{header:n(()=>[...e[6]||(e[6]=[l("div",{class:"modal-header"},[l("div",{class:"text-h6"},"Detalles del Documento"),z(" /> ")],-1)])]),body:n(()=>[a(C)?(m(),$("div",le)):j("",!0)]),footer:n(()=>[s(W,{label:"Cerrar","custom-class":"boton-cerrar",onClick:e[3]||(e[3]=o=>r.value=!1)})]),_:1},8,["modelValue"])]),_:1}))}},Qe=R(re,[["__scopeId","data-v-3812710b"]]);export{Qe as default};
