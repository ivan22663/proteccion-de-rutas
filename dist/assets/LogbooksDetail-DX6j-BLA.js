import{Q as te}from"./QTd-Dz2_L_T4.js";import{_ as re,r,a5 as se,n as ie,h as j,b as o,d as l,a as t,o as N,l as c,j as m,t as $,ae as E,i as b,g as ne}from"./index-D8k0Z2VW.js";import{Q as L}from"./QForm-BHoNUr4c.js";import{Q as de}from"./QFile-DYrxQo6S.js";import{Q as ue}from"./QBanner-tZm71ZRY.js";import{B as ce}from"./BackButton-OAicZK4q.js";import{B as i}from"./Button-ByZOtwGJ.js";import{T as me}from"./Table-DrGgNztj.js";import{_ as U}from"./ButtonTableOptions-ivpzFDPv.js";import{M as f}from"./Modal-CwwUMTwV.js";import{P as ve}from"./PageHeader-BZtJRD6F.js";import"./QSelect-CCFBgF8v.js";import"./QItemLabel-BiKvV_tR.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./QList-D6hH9GPe.js";import"./QLinearProgress-C9Sex94R.js";import"./QTooltip-BIz5X8HU.js";const fe={class:"bitacora-detalle-container"},pe={class:"content-wrapper"},be={class:"tabla-wrapper"},he={class:"botones-superiores"},ge={class:"opciones-icons"},we={class:"modal-header"},xe={class:"text-h6 flex items-center"},Ve={class:"pdf-container"},Ce=["src"],ye={class:"modal-header"},ke={class:"text-h6 flex items-center"},qe={class:"modal-header"},ze={class:"text-h6 flex items-center"},Be={class:"modal-content-single"},Ue={class:"row justify-end q-gutter-sm full-width"},_e={class:"modal-header"},Se={class:"text-h6 flex items-center"},Ae={class:"modal-header"},Re={class:"text-h6 flex items-center"},Me={class:"modal-header"},Ee={class:"text-h6 flex items-center"},Le={class:"modal-content-single"},De={class:"row justify-end q-gutter-sm full-width"},Ie={class:"modal-header"},Fe={class:"text-h6 flex items-center"},Qe={class:"modal-header"},Te={class:"text-h6 flex items-center"},je={class:"modal-content-single"},Ne={key:0,class:"q-my-md"},$e={class:"row justify-end q-gutter-sm full-width"},Pe={class:"modal-header"},Oe={class:"text-h6 flex items-center"},He={__name:"LogbooksDetail",setup(Xe){const P=ie(),C=r(!1),h=r(!1),g=r(!1),y=r(!1),w=r(!1),x=r(!1),k=r(!1),V=r(!1),q=r(!1),_=r(""),s=r(null),z=r(!1),S=r(!1),B=r(!1),A=r(!1),R=r(!1),p=r(null),v=r({instructor:"",fecha:""}),n=r({instructor:"",fecha:"",comentario:""}),d=r({instructor:"",fecha:"",comentario:""}),D=r([{id:1,bitacora:"Bitácora 1",estado:"Revisada",fechaEntrega:"23/12/2025",pdfUrl:"https://pdfobject.com/pdf/sample.pdf"},{id:2,bitacora:"Bitácora 2",estado:"No revisada",fechaEntrega:"23/12/2025",pdfUrl:"https://pdfobject.com/pdf/sample.pdf"},{id:3,bitacora:"Bitácora 3",estado:"Rechazada",fechaEntrega:"23/12/2025",pdfUrl:"https://pdfobject.com/pdf/sample.pdf"},{id:4,bitacora:"Bitácora 4",estado:"Aceptada",fechaEntrega:"23/12/2025",pdfUrl:"https://pdfobject.com/pdf/sample.pdf"}]),I=r({page:1,rowsPerPage:10,rowsNumber:D.value.length}),O=[{name:"bitacora",label:"Bitácoras",field:"bitacora",align:"left",sortable:!0},{name:"estado",label:"Estado",field:"estado",align:"left",sortable:!0},{name:"fechaEntrega",label:"Fecha de entrega",field:"fechaEntrega",align:"left",sortable:!0},{name:"opciones",label:"Opciones",field:"opciones",align:"center"}];se(()=>{const u=P.params.id;console.log("Cargando bitácoras del aprendiz:",u)});function H(u){console.log("Ver bitácora:",u),s.value=u,_.value=u.pdfUrl||"https://pdfobject.com/pdf/sample.pdf",C.value=!0}function X(u){s.value=u,h.value=!0}function G(){z.value=!0,setTimeout(()=>{z.value=!1,h.value=!1,g.value=!0},500)}function J(){h.value=!1,s.value=null}function F(){if(!v.value.instructor.trim()||!v.value.fecha){console.warn("Debe completar todos los campos");return}S.value=!0,setTimeout(()=>{console.log("Aprobar bitácora:",{bitacora:s.value,instructor:v.value.instructor,fecha:v.value.fecha}),s.value.estado="Aceptada",S.value=!1,g.value=!1,y.value=!0},1e3)}function K(){y.value=!1,s.value=null,v.value={instructor:"",fecha:""}}function W(u){s.value=u,w.value=!0}function Y(){B.value=!0,setTimeout(()=>{B.value=!1,w.value=!1,x.value=!0},500)}function Z(){w.value=!1,s.value=null}function Q(){if(!n.value.instructor.trim()||!n.value.fecha||!n.value.comentario.trim()){console.warn("Debe completar todos los campos");return}A.value=!0,setTimeout(()=>{console.log("Rechazar bitácora:",{bitacora:s.value,instructor:n.value.instructor,fecha:n.value.fecha,comentario:n.value.comentario}),s.value.estado="Rechazada",A.value=!1,x.value=!1,k.value=!0},1e3)}function ee(){k.value=!1,s.value=null,n.value={instructor:"",fecha:"",comentario:""}}function ae(u){s.value=u,V.value=!0}function T(){if(!d.value.instructor.trim()||!d.value.fecha||!d.value.comentario.trim()||!p.value){console.warn("Debe completar todos los campos y seleccionar un archivo");return}R.value=!0,setTimeout(()=>{console.log("Subir bitácora:",{bitacora:s.value,instructor:d.value.instructor,fecha:d.value.fecha,comentario:d.value.comentario,archivo:p.value.name}),R.value=!1,V.value=!1,q.value=!0},1e3)}function oe(){q.value=!1,s.value=null,d.value={instructor:"",fecha:"",comentario:""},p.value=null}function le(){C.value=!1,s.value=null,_.value=""}return(u,e)=>(N(),j("div",fe,[o(ce,{size:40,class:"back-arrow"}),l("div",pe,[o(ve,{title:"Bitácoras"}),l("div",be,[l("div",he,[o(i,{icon:"reorder",label:"Filtrar","custom-class":"btn-filtrar","no-caps":""})]),o(me,{rows:D.value,columns:O,"row-key":"id","rows-per-page-options":[5,10,20],pagination:I.value,card:!0,"onUpdate:pagination":e[0]||(e[0]=a=>I.value=a)},{"body-cell-opciones":t(a=>[o(te,{props:a,class:"text-center"},{default:t(()=>[l("div",ge,[o(U,{icon:"visibility",color:"grey-7",tooltip:"Ver",onClick:M=>H(a.row)},null,8,["onClick"]),o(U,{icon:"check",color:"grey-7",tooltip:"Aprobar",onClick:M=>X(a.row)},null,8,["onClick"]),o(U,{icon:"close",color:"grey-7",tooltip:"Rechazar",onClick:M=>W(a.row)},null,8,["onClick"]),o(U,{icon:"upload",color:"grey-7",tooltip:"Subir Bitácora",onClick:M=>ae(a.row)},null,8,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])])]),o(f,{modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=a=>C.value=a),variant:"view",width:"90vw","max-width":"1200px"},{header:t(()=>[l("div",we,[l("div",xe,[o(m,{name:"picture_as_pdf",class:"q-mr-sm"}),c(" Visualizar Bitácora - "+$(s.value?.bitacora||"Documento"),1)])])]),body:t(()=>[l("div",Ve,[l("iframe",{src:_.value,frameborder:"0",class:"pdf-iframe"},null,8,Ce)])]),footer:t(()=>[o(i,{label:"Cerrar","custom-class":"boton-cerrar",onClick:le})]),_:1},8,["modelValue"]),o(f,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=a=>h.value=a),variant:"view",width:"500px","max-width":"90vw",persistent:""},{header:t(()=>[l("div",ye,[l("div",ke,[o(m,{name:"help",class:"q-mr-sm"}),e[22]||(e[22]=c(" Confirmar Acción ",-1))])])]),body:t(()=>[...e[23]||(e[23]=[l("div",{class:"text-center q-pa-md"},[l("div",{class:"text-body1"},"¿Estás seguro de que deseas aceptar la bitácora?")],-1)])]),footer:t(()=>[o(i,{label:"Cancelar","custom-class":"boton-cerrar",disable:z.value,onClick:J},null,8,["disable"]),o(i,{label:"Aceptar",loading:z.value,onClick:G},null,8,["loading"])]),_:1},8,["modelValue"]),o(f,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=a=>g.value=a),width:"600px",variant:"edit","max-width":"95vw",persistent:""},{header:t(()=>[l("div",qe,[l("div",ze,[o(m,{name:"check_circle",class:"q-mr-sm"}),e[24]||(e[24]=c(" Aceptar Bitácora ",-1))])])]),body:t(()=>[o(L,{onSubmit:E(F,["prevent"])},{default:t(()=>[l("div",Be,[e[25]||(e[25]=l("div",{class:"section-title"},"Información de Aprobación",-1)),o(b,{modelValue:v.value.instructor,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value.instructor=a),filled:"",dense:"",label:"Instructor *",placeholder:"Nombre del instructor",rules:[a=>!!a||"El nombre del instructor es requerido"]},null,8,["modelValue","rules"]),o(b,{modelValue:v.value.fecha,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value.fecha=a),filled:"",dense:"",label:"Fecha *",type:"date",rules:[a=>!!a||"La fecha es requerida"]},null,8,["modelValue","rules"])])]),_:1})]),footer:t(()=>[l("div",Ue,[o(i,{"custom-class":"boton-cerrar",label:"Cancelar",onClick:e[5]||(e[5]=a=>g.value=!1)}),o(i,{label:"Aceptar Bitácora","custom-class":"gradient-btn",loading:S.value,onClick:F},null,8,["loading"])])]),_:1},8,["modelValue"]),o(f,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=a=>y.value=a),variant:"view",width:"500px","max-width":"90vw",persistent:""},{header:t(()=>[l("div",_e,[l("div",Se,[o(m,{name:"check_circle",color:"green",class:"q-mr-sm"}),e[26]||(e[26]=c(" Confirmación ",-1))])])]),body:t(()=>[...e[27]||(e[27]=[l("div",{class:"text-center q-pa-md"},[l("div",{class:"text-body1 q-mb-sm"},"La bitácora ha sido confirmada."),l("div",{class:"text-body2"},"Una notificación llegara al aprendiz.")],-1)])]),footer:t(()=>[o(i,{label:"Aceptar",onClick:K})]),_:1},8,["modelValue"]),o(f,{modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=a=>w.value=a),variant:"view",width:"500px","max-width":"90vw",persistent:""},{header:t(()=>[l("div",Ae,[l("div",Re,[o(m,{name:"help",class:"q-mr-sm"}),e[28]||(e[28]=c(" Confirmar Rechazo ",-1))])])]),body:t(()=>[...e[29]||(e[29]=[l("div",{class:"text-center q-pa-md"},[l("div",{class:"text-body1"},"¿Estás seguro de que deseas rechazar la bitácora?")],-1)])]),footer:t(()=>[o(i,{label:"Cancelar","custom-class":"boton-cerrar",disable:B.value,onClick:Z},null,8,["disable"]),o(i,{label:"Aceptar",loading:B.value,onClick:Y},null,8,["loading"])]),_:1},8,["modelValue"]),o(f,{modelValue:x.value,"onUpdate:modelValue":e[13]||(e[13]=a=>x.value=a),width:"700px",variant:"edit","max-width":"95vw",persistent:""},{header:t(()=>[l("div",Me,[l("div",Ee,[o(m,{name:"cancel",class:"q-mr-sm"}),e[30]||(e[30]=c(" Rechazar Bitácora ",-1))])])]),body:t(()=>[o(L,{onSubmit:E(Q,["prevent"])},{default:t(()=>[l("div",Le,[e[31]||(e[31]=l("div",{class:"section-title"},"Información de Rechazo",-1)),o(b,{modelValue:n.value.instructor,"onUpdate:modelValue":e[9]||(e[9]=a=>n.value.instructor=a),filled:"",dense:"",label:"Instructor *",placeholder:"Nombre del instructor",rules:[a=>!!a||"El nombre del instructor es requerido"]},null,8,["modelValue","rules"]),o(b,{modelValue:n.value.fecha,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value.fecha=a),filled:"",dense:"",label:"Fecha *",type:"date",rules:[a=>!!a||"La fecha es requerida"]},null,8,["modelValue","rules"]),o(b,{modelValue:n.value.comentario,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.comentario=a),filled:"",dense:"",label:"Comentario *",type:"textarea",placeholder:"Escribe un comentario sobre el rechazo...",rows:4,rules:[a=>!!a||"El comentario es requerido"]},null,8,["modelValue","rules"])])]),_:1})]),footer:t(()=>[l("div",De,[o(i,{"custom-class":"boton-cerrar",label:"Cancelar",onClick:e[12]||(e[12]=a=>x.value=!1)}),o(i,{label:"Rechazar Bitácora","custom-class":"gradient-btn",loading:A.value,onClick:Q},null,8,["loading"])])]),_:1},8,["modelValue"]),o(f,{modelValue:k.value,"onUpdate:modelValue":e[14]||(e[14]=a=>k.value=a),variant:"view",width:"500px","max-width":"90vw",persistent:""},{header:t(()=>[l("div",Ie,[l("div",Fe,[o(m,{name:"info",color:"orange",class:"q-mr-sm"}),e[32]||(e[32]=c(" Confirmación de Rechazo ",-1))])])]),body:t(()=>[...e[33]||(e[33]=[l("div",{class:"text-center q-pa-md"},[l("div",{class:"text-body1 q-mb-sm"},"La bitácora ha sido rechazada."),l("div",{class:"text-body2"},"Una notificación llegara al aprendiz.")],-1)])]),footer:t(()=>[o(i,{label:"Aceptar",onClick:ee})]),_:1},8,["modelValue"]),o(f,{modelValue:V.value,"onUpdate:modelValue":e[20]||(e[20]=a=>V.value=a),width:"700px",variant:"edit","max-width":"95vw",persistent:""},{header:t(()=>[l("div",Qe,[l("div",Te,[o(m,{name:"cloud_upload",class:"q-mr-sm"}),e[34]||(e[34]=c(" Subir Bitácora Firmada ",-1))])])]),body:t(()=>[o(L,{onSubmit:E(T,["prevent"])},{default:t(()=>[l("div",je,[e[36]||(e[36]=l("div",{class:"section-title"},"Información del Instructor",-1)),o(b,{modelValue:d.value.instructor,"onUpdate:modelValue":e[15]||(e[15]=a=>d.value.instructor=a),filled:"",dense:"",label:"Instructor *",placeholder:"Nombre del instructor",rules:[a=>!!a||"El nombre del instructor es requerido"]},null,8,["modelValue","rules"]),o(b,{modelValue:d.value.fecha,"onUpdate:modelValue":e[16]||(e[16]=a=>d.value.fecha=a),filled:"",dense:"",label:"Fecha *",type:"date",rules:[a=>!!a||"La fecha es requerida"]},null,8,["modelValue","rules"]),o(b,{modelValue:d.value.comentario,"onUpdate:modelValue":e[17]||(e[17]=a=>d.value.comentario=a),filled:"",dense:"",label:"Comentario *",type:"textarea",placeholder:"Escribe un comentario...",rows:3,rules:[a=>!!a||"El comentario es requerido"]},null,8,["modelValue","rules"]),e[37]||(e[37]=l("div",{class:"section-title q-mt-lg"},"Archivo de Bitácora",-1)),o(de,{modelValue:p.value,"onUpdate:modelValue":e[18]||(e[18]=a=>p.value=a),outlined:"",label:"Seleccionar archivo",accept:".pdf,.doc,.docx","max-file-size":"5242880",clearable:""},{prepend:t(()=>[o(m,{name:"attach_file"})]),hint:t(()=>[...e[35]||(e[35]=[c(" Formatos permitidos: PDF, DOC, DOCX. Tamaño máximo: 5MB. ",-1)])]),_:1},8,["modelValue"]),p.value?(N(),j("div",Ne,[o(ue,{class:"bg-green-1 text-green-8",rounded:""},{avatar:t(()=>[o(m,{name:"check_circle",color:"green"})]),default:t(()=>[c(" Archivo seleccionado: "+$(p.value.name),1)]),_:1})])):ne("",!0)])]),_:1})]),footer:t(()=>[l("div",$e,[o(i,{"custom-class":"boton-cerrar",label:"Cancelar",onClick:e[19]||(e[19]=a=>V.value=!1)}),o(i,{label:"Subir Archivo","custom-class":"gradient-btn",loading:R.value,disable:!p.value,onClick:T},null,8,["loading","disable"])])]),_:1},8,["modelValue"]),o(f,{modelValue:q.value,"onUpdate:modelValue":e[21]||(e[21]=a=>q.value=a),variant:"view",width:"500px","max-width":"90vw",persistent:""},{header:t(()=>[l("div",Pe,[l("div",Oe,[o(m,{name:"cloud_done",color:"green",class:"q-mr-sm"}),e[38]||(e[38]=c(" Archivo Subido ",-1))])])]),body:t(()=>[...e[39]||(e[39]=[l("div",{class:"text-center q-pa-md"},[l("div",{class:"text-body1 q-mb-sm"},"Bitácora subida exitosamente."),l("div",{class:"text-body2"},"La bitácora ha sido actualizada correctamente.")],-1)])]),footer:t(()=>[o(i,{label:"Aceptar",onClick:oe})]),_:1},8,["modelValue"])]))}},va=re(He,[["__scopeId","data-v-d7219941"]]);export{va as default};
