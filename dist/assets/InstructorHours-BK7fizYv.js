import{_ as z,r as h,m as M,a5 as U,h as A,b as s,d as t,a as l,f as S,e as i,i as q,o as $,s as R,j as c,t as p,l as d}from"./index-D8k0Z2VW.js";import{Q as G}from"./QTd-Dz2_L_T4.js";import{a as L}from"./apiClient-Vvvjylwf.js";import{u as O}from"./useNotifications-C15CMF32.js";import{u as J}from"./useEntityManager-6kUzRwOq.js";import{B as f}from"./Button-ByZOtwGJ.js";import{T as K}from"./Table-DrGgNztj.js";import{M as D}from"./Modal-CwwUMTwV.js";import{_ as W}from"./ButtonTableOptions-ivpzFDPv.js";import{P as X}from"./PageHeader-BZtJRD6F.js";import{B as Y}from"./BackButton-OAicZK4q.js";import"./QList-D6hH9GPe.js";import"./QSelect-CCFBgF8v.js";import"./QItemLabel-BiKvV_tR.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./QLinearProgress-C9Sex94R.js";import"./QTooltip-BIz5X8HU.js";const Z={class:"q-pa-md"},ee={class:"full-width row"},ae={class:"col-12"},te={class:"container"},se={class:"filters-wrapper flex items-center justify-between q-my-lg"},re={class:"filters-left flex items-center bg-white"},oe={class:"filter-item search"},le={class:"q-pa-md flex flex-center column text-grey full-width"},ie={class:"text-subtitle2 q-mt-sm"},ne={class:"modal-header"},de={class:"text-h6 flex items-center"},me={class:"q-pa-md"},ue={class:"text-h6 q-mb-md"},ce={class:"row justify-end q-gutter-sm full-width"},pe={class:"modal-header"},fe={class:"text-h6 flex items-center"},ve={class:"q-pa-md text-center"},be={class:"text-h6 q-mb-md"},ge={class:"confirmation-text text-body1"},_e={class:"row justify-end q-gutter-sm full-width"},he={__name:"InstructorHours",setup(xe){const{error:v,success:E}=O(),V=a=>!!a||"Este campo es requerido",x=()=>({_id:"",name:"",value:"",label:"",description:""}),k=(a,e)=>{const r={...e};r.category="ACADEMIC";const _=a.search?.trim();return _&&(r.name=_),r},B=a=>{const e=a?.data||[];return{data:e,total:e.length}},{loading:b,loadingTable:N,rows:I,formData:o,filtersData:g,handleSearchChange:F,fetchEntities:w}=J({entityName:"parámetro",entityNamePlural:"parámetros",getDefaultFormData:x,endpoints:{list:"/parameters/filterParameters",update:a=>`/parameters/updateParameter/${a}`},messages:{listError:"Error al cargar parámetros",updateSuccess:"Parámetro actualizado exitosamente",updateError:"Error al actualizar el parámetro"},buildFilterParams:k,processResponse:B}),n=h(null),m=h(!1),u=h(!1),H=[{name:"name",align:"center",label:"Actividad",field:"name",sortable:!0},{name:"value",align:"center",label:"Cantidad",field:"value",sortable:!0},{name:"label",align:"center",label:"Tiempo asignado",field:"label",sortable:!0},{name:"description",align:"center",label:"Descripción",field:"description",sortable:!0},{name:"options",align:"center",label:"Opciones",field:"options"}],P=M(()=>o.value.value&&o.value.value>0),Q=a=>{n.value=a,o.value._id=a._id,o.value.name=a.name,o.value.value=a.value||"",o.value.label=a.label||"",o.value.description=a.description||"",m.value=!0},y=()=>{m.value=!1,n.value=null,o.value=x()},T=()=>{if(P.value){u.value=!0;return}v("Por favor ingresa un valor válido")},C=()=>{u.value=!1},j=async()=>{if(!n.value||!o.value.value){v("Por favor verifica los datos ingresados");return}b.value=!0;try{const a=o.value._id;await L(`/parameters/updateParameter/${a}`,{value:Number(o.value.value)}),E("Parámetro actualizado exitosamente"),C(),y(),await w()}catch(a){const e=a?.response?.data?.message||a?.response?.data?.msg||a?.message||"Error al actualizar el parámetro";v(e)}finally{b.value=!1}};return U(async()=>{await w()}),(a,e)=>($(),A("div",Z,[s(Y),t("div",ee,[t("div",ae,[s(S,{class:"shadow-1 hero-card q-mb-xl"},{default:l(()=>[s(R,{class:"flex flex-center"},{default:l(()=>[s(X,{title:"Configuración Académica y Horas Formativas",description:"Define las horas base para instructores.",align:"center"})]),_:1})]),_:1})])]),t("div",te,[t("div",se,[t("div",re,[t("div",oe,[s(q,{modelValue:i(g).search,"onUpdate:modelValue":[e[0]||(e[0]=r=>i(g).search=r),i(F)],outlined:"",dense:"",clearable:"",debounce:"600",placeholder:"Buscar por nombre..."},{prepend:l(()=>[s(c,{name:"search",color:"green-8"})]),_:1},8,["modelValue","onUpdate:modelValue"])])])]),s(K,{rows:i(I),columns:H,"row-key":"_id",loading:i(N)},{"body-cell-options":l(r=>[s(G,{props:r,class:"text-center"},{default:l(()=>[s(W,{icon:"edit",color:"grey-7",tooltip:"Editar",onClick:_=>Q(r.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":l(()=>[t("div",le,[s(c,{name:"settings",size:"2.5em",color:"primary"}),t("div",ie,p(i(g).search?"No se encontraron parámetros con ese nombre":"No hay parámetros registrados"),1)])]),_:1},8,["rows","loading"])]),s(D,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=r=>m.value=r),variant:"edit",width:"600px","max-width":"95vw",persistent:""},{header:l(()=>[t("div",ne,[t("div",de,[s(c,{name:"edit",class:"q-mr-sm"}),e[4]||(e[4]=d(" Editar Hora de Instructor ",-1))])])]),body:l(()=>[t("div",me,[t("div",ue,p(n.value?.name||"-"),1),s(q,{modelValue:i(o).value,"onUpdate:modelValue":e[1]||(e[1]=r=>i(o).value=r),outlined:"",dense:"",label:"Hora Base",type:"number",rules:[V,r=>r>0||"La hora base debe ser mayor que 0"]},null,8,["modelValue","rules"])])]),footer:l(()=>[t("div",ce,[s(f,{label:"Cancelar","custom-class":"boton-cerrar",onClick:y}),s(f,{label:"Guardar","custom-class":"gradient-btn",onClick:T,disable:!P.value},null,8,["disable"])])]),_:1},8,["modelValue"]),s(D,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=r=>u.value=r),width:"500px","max-width":"90vw",persistent:""},{header:l(()=>[t("div",pe,[t("div",fe,[s(c,{name:"help",class:"q-mr-sm"}),e[5]||(e[5]=d(" Confirmar Cambios ",-1))])])]),body:l(()=>[t("div",ve,[t("div",be,[e[6]||(e[6]=d(" ¿Está seguro de que desea guardar los cambios para ",-1)),t("strong",null,p(n.value?.name),1),e[7]||(e[7]=d("? ",-1))]),t("p",ge,[e[8]||(e[8]=d("El nuevo valor será: ",-1)),t("strong",null,p(i(o).value),1)])])]),footer:l(()=>[t("div",_e,[s(f,{label:"Cancelar","custom-class":"boton-cerrar",onClick:C}),s(f,{label:"Guardar","custom-class":"gradient-btn",onClick:j,loading:i(b)},null,8,["loading"])])]),_:1},8,["modelValue"])]))}},Ue=z(he,[["__scopeId","data-v-66b97af6"]]);export{Ue as default};
