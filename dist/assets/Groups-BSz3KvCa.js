import{_ as q,r as d,c as p,a,u as F,o as i,b as e,d as t,f as x,s as _,h,g as Q,i as C,k as I,l as m,t as c,ad as V,F as z,p as S,z as j,Q as w,j as v,aa as A}from"./index-D8k0Z2VW.js";import{Q as D}from"./QTooltip-BIz5X8HU.js";import{Q as E,a as g,b as k}from"./QItemLabel-BiKvV_tR.js";import{Q as L}from"./QList-D6hH9GPe.js";import{Q as P}from"./QBanner-tZm71ZRY.js";import{Q as R}from"./QPage-CDUm3vNP.js";import{g as $}from"./apiClient-Vvvjylwf.js";import{u as G}from"./useNotifications-C15CMF32.js";import{B as K}from"./BackButton-OAicZK4q.js";import{B as T}from"./Button-ByZOtwGJ.js";import{P as H}from"./PageHeader-BZtJRD6F.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";const U={class:"full-width row"},J={class:"col-12"},M={class:"container"},O={class:"row justify-center q-mb-lg"},W={class:"col-12 col-md-8"},X={key:0,class:"row justify-center"},Y={class:"col-12 col-md-8"},Z={class:"text-caption text-grey-7"},ee={key:1,class:"row justify-center"},ae={class:"col-12 col-md-8"},se={class:"text-body2 text-grey-7"},te={__name:"Groups",setup(oe){const B=F(),f=G(),o=d(""),r=d([]),u=d(!1),b=d(!1),y=async()=>{if(!o.value||o.value.trim()===""){f.warning("Por favor ingresa un número de ficha");return}u.value=!0,b.value=!0;try{const n=await $(`/fiches/listFiche?search=${o.value.trim()}`),s=n?.msg||n?.data||[];r.value=Array.isArray(s)?s:[],console.log(s),console.log("� Fichas encontradas:",r.value.length),r.value.length===0&&f.info(`No se encontraron fichas con el número: ${o.value}`)}catch(n){console.error("Error al buscar la ficha:",n),f.error("Error al buscar la ficha"),r.value=[]}finally{u.value=!1}},N=n=>{B.push({name:"Apprentices",query:{recordNumber:n.number}})};return(n,s)=>(i(),p(R,{class:"q-pa-md groups-page"},{default:a(()=>[e(K,{class:"q-mb-lg"}),t("div",U,[t("div",J,[e(x,{class:"shadow-1 hero-card q-mb-xl"},{default:a(()=>[e(_,null,{default:a(()=>[e(H,{title:"Buscar Ficha",description:"Ingrese el número de la ficha para buscar"})]),_:1})]),_:1})])]),t("div",M,[t("div",O,[t("div",W,[e(C,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value=l),outlined:"",placeholder:"Escribe el número de la ficha...",clearable:"",class:"search-input",onKeyup:I(y,["enter"])},{append:a(()=>[e(T,{icon:"search",flat:"",round:"",dense:"","custom-class":"icon-button",onClick:y,loading:u.value,disable:!o.value||o.value.trim()===""},{default:a(()=>[e(D,null,{default:a(()=>[...s[1]||(s[1]=[m("Buscar",-1)])]),_:1})]),_:1},8,["loading","disable"])]),_:1},8,["modelValue"])])]),r.value.length>0?(i(),h("div",X,[t("div",Y,[e(x,{class:"results-card"},{default:a(()=>[e(_,{class:"results-header"},{default:a(()=>[s[2]||(s[2]=t("div",{class:"text-h6"},"Resultados de búsqueda",-1)),t("div",Z,c(r.value.length)+" ficha"+c(r.value.length!==1?"s":"")+" encontrada"+c(r.value.length!==1?"s":""),1)]),_:1}),e(V),e(_,{class:"q-pa-none"},{default:a(()=>[e(L,null,{default:a(()=>[(i(!0),h(z,null,S(r.value,l=>j((i(),p(E,{key:l._id,clickable:"",onClick:re=>N(l),class:"result-item"},{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(w,{color:"primary","text-color":"white",size:"48px"},{default:a(()=>[e(v,{name:"school",size:"24px"})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(k,{class:"fiche-number"},{default:a(()=>[m(" Ficha "+c(l.number),1)]),_:2},1024),l.program&&l.program.name?(i(),p(k,{key:0,caption:"",class:"fiche-program-name"},{default:a(()=>[m(c(l.program?.name),1)]),_:2},1024)):Q("",!0)]),_:2},1024),e(g,{side:""},{default:a(()=>[e(v,{name:"arrow_forward_ios",color:"primary",size:"20px"})]),_:1})]),_:2},1032,["onClick"])),[[A]])),128))]),_:1})]),_:1})]),_:1})])])):b.value&&!u.value?(i(),h("div",ee,[t("div",ae,[e(P,{class:"no-results-banner",rounded:""},{avatar:a(()=>[e(w,{color:"grey-4","text-color":"grey-7",size:"48px"},{default:a(()=>[e(v,{name:"search_off",size:"28px"})]),_:1})]),default:a(()=>[s[4]||(s[4]=t("div",{class:"text-subtitle1 text-weight-medium q-mb-xs"}," No se encontraron fichas ",-1)),t("div",se,[s[3]||(s[3]=m(" No hay fichas registradas con el número: ",-1)),t("strong",null,c(o.value),1)])]),_:1})])])):Q("",!0)])]),_:1}))}},be=q(te,[["__scopeId","data-v-b7d78a4d"]]);export{be as default};
