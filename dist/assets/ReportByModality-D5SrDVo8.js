import{_ as Q,r as u,m as R,a5 as U,c as w,a as d,u as A,o as N,b as t,d as o,f as k,s as S,e as r,i as p,j as c}from"./index-D8k0Z2VW.js";import{Q as v}from"./QSelect-CCFBgF8v.js";import{Q as q}from"./QPage-CDUm3vNP.js";import{u as I}from"./useEntityManager-6kUzRwOq.js";import{u as x}from"./useNotifications-C15CMF32.js";import{B as E}from"./BackButton-OAicZK4q.js";import{P as G}from"./PageHeader-BZtJRD6F.js";import{B as f}from"./Button-ByZOtwGJ.js";import"./QItemLabel-BiKvV_tR.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./apiClient-Vvvjylwf.js";const Y={class:"full-width row"},j={class:"col-12"},z={class:"container"},H={class:"reporte-card"},L={class:"reporte-body"},J={class:"form-grid"},K={class:"form-item"},O={class:"form-item"},T={class:"form-item"},W={class:"form-item"},X={class:"actions"},Z={__name:"ReportByModality",setup($){const y=A(),{warning:b}=x(),_=()=>({_id:"",year:null,modality:null,startDate:"",endDate:""}),g={list:"/modalities/listModalities"},D={listError:"Error al cargar modalidades",noData:"No hay modalidades disponibles"},V=s=>{const e=s?.msg??s?.data??s??{},l=Array.isArray(e)?e:e?.modalities||e?.modalidades||e?.list||[];return{data:Array.isArray(l)?l:[],total:e?.totalDocuments??e?.total??l.length}},{formData:a,resetForm:h}=I({entityName:"modality",entityNamePlural:"modalities",getDefaultFormData:_,endpoints:g,messages:D,processResponse:V}),M=h,n=u([]),i=u([]),m=R(()=>!!(a.value.year&&a.value.modality&&a.value.startDate&&a.value.endDate));function B(){M(),a.value.year=null,a.value.modality=null,a.value.startDate="",a.value.endDate=""}function F(){if(!m.value){b("Por favor complete todos los campos");return}y.push({path:"/app/admin/vistareportepormodalidad",query:{anio:a.value.year,modalidad:a.value.modality,fechaInicio:a.value.startDate,fechaFin:a.value.endDate}})}function C(){const s=new Date().getFullYear();n.value=[];for(let e=0;e<=5;e++)n.value.push(String(s-e))}async function P(){i.value=[{id:1,nombre:"Contrato de aprendizaje"},{id:2,nombre:"Vinculo laboral"},{id:3,nombre:"Proyecto productivo"},{id:4,nombre:"Pasantía U.P. Familiar"}]}return U(()=>{C(),P()}),(s,e)=>(N(),w(q,{class:"q-pa-md report-page"},{default:d(()=>[t(E,{class:"q-mb-lg"}),o("div",Y,[o("div",j,[t(k,{class:"shadow-1 hero-card q-mb-xl"},{default:d(()=>[t(S,null,{default:d(()=>[t(G,{title:"Reporte por Modalidad",description:"Genera reportes filtrados por modalidad."})]),_:1})]),_:1}),o("div",z,[o("div",H,[e[8]||(e[8]=o("div",{class:"reporte-header"},[o("span",null,"Filtros del reporte")],-1)),o("div",L,[o("div",J,[o("div",K,[e[4]||(e[4]=o("label",null,"Año",-1)),t(v,{modelValue:r(a).year,"onUpdate:modelValue":e[0]||(e[0]=l=>r(a).year=l),options:n.value,outlined:"",placeholder:"Seleccionar año",dense:"",clearable:""},null,8,["modelValue","options"])]),o("div",O,[e[5]||(e[5]=o("label",null,"Modalidad",-1)),t(v,{modelValue:r(a).modality,"onUpdate:modelValue":e[1]||(e[1]=l=>r(a).modality=l),options:i.value,"option-label":"nombre","option-value":"id",outlined:"",placeholder:"Seleccionar modalidad",dense:"","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"])]),o("div",T,[e[6]||(e[6]=o("label",null,"Fecha desde",-1)),t(p,{modelValue:r(a).startDate,"onUpdate:modelValue":[e[2]||(e[2]=l=>r(a).startDate=l),s.handleDateChange],outlined:"",dense:"",type:"date"},{prepend:d(()=>[t(c,{name:"event",color:"green-8"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),o("div",W,[e[7]||(e[7]=o("label",null,"Fecha hasta",-1)),t(p,{modelValue:r(a).endDate,"onUpdate:modelValue":[e[3]||(e[3]=l=>r(a).endDate=l),s.handleDateChange],outlined:"",dense:"",type:"date"},{prepend:d(()=>[t(c,{name:"event",color:"green-8"})]),_:1},8,["modelValue","onUpdate:modelValue"])])]),o("div",X,[t(f,{label:"Limpiar","custom-class":"boton-cerrar",onClick:B}),t(f,{label:"Ver reporte","custom-class":"gradient-btn",disable:!m.value,onClick:F},null,8,["disable"])])])])])])])]),_:1}))}},ce=Q(Z,[["__scopeId","data-v-aa3e7934"]]);export{ce as default};
