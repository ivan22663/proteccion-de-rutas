import{Q as E}from"./QTd-Dz2_L_T4.js";import{_ as no,r as n,m as Q,n as ro,c as co,a as s,u as uo,o as B,b as a,d as o,h as mo,g as po,t as i,l as u,j as F,i as vo,ae as fo}from"./index-D8k0Z2VW.js";import{Q as T}from"./QSelect-CCFBgF8v.js";import{Q as bo,a as go}from"./QItemLabel-BiKvV_tR.js";import{Q as ho}from"./QBadge-pToOuXWH.js";import{Q as yo}from"./QPage-CDUm3vNP.js";import{u as _o}from"./use-quasar-Dk_EY-O4.js";import{T as Co}from"./Table-DrGgNztj.js";import{M as v}from"./Modal-CwwUMTwV.js";import{B as r}from"./Button-ByZOtwGJ.js";import{_ as xo}from"./ButtonTableOptions-ivpzFDPv.js";import{B as zo}from"./BackButton-OAicZK4q.js";import"./position-engine-BrzQKXCo.js";import"./selection-CjJDPdFp.js";import"./format-DyQxkAtJ.js";import"./QList-D6hH9GPe.js";import"./QLinearProgress-C9Sex94R.js";import"./QTooltip-BIz5X8HU.js";const Vo={class:"main-card"},wo={class:"aprendiz-nombre"},Do={class:"banner-ficha"},Ao={class:"ficha-title"},ko={key:0,class:"instructor-asignado"},Io={class:"instructor-info"},Mo={class:"instructor-avatar"},So={class:"instructor-datos"},Ro={class:"instructor-nombre"},qo={class:"instructor-cargo"},Eo={class:"mensaje-contrato"},Qo={class:"q-pa-md flex flex-center column text-grey full-width"},Bo={class:"buttons-container"},Fo={class:"q-pa-md"},To={class:"text-body1"},Uo={class:"q-pa-md"},jo={class:"text-body1"},Lo={class:"modal-body-custom"},Po={class:"form-group"},No={class:"form-group"},$o={class:"modal-footer-custom-simple"},Go={class:"modal-header-simple"},Oo={class:"modal-title-center"},Jo={class:"modal-confirmacion-body"},Ho={class:"confirmacion-section"},Ko={class:"confirmacion-value"},Wo={class:"selected-area-chip"},Xo={class:"confirmacion-section"},Yo={class:"instructor-confirmacion"},Zo={class:"instructor-avatar-confirm"},oe={class:"instructor-datos-confirm"},ee={class:"instructor-nombre-confirm"},ae={class:"instructor-cargo-confirm"},se={class:"modal-footer-custom-dual"},te={class:"modal-exito-body"},le={class:"aprendiz-nombre-modal"},ie={class:"banner-ficha-modal"},ne={class:"ficha-title"},re={class:"instructor-asignado-modal"},de={class:"instructor-info-modal"},ce={class:"instructor-avatar-modal"},ue={class:"instructor-datos-modal"},me={class:"instructor-nombre-modal"},pe={class:"instructor-cargo-modal"},ve={class:"mensaje-contrato-modal"},fe={class:"tabla-documentos-modal"},be={class:"simple-table-modal"},ge={class:"text-center"},he={class:"modal-footer-custom-center"},ye={class:"modal-header-simple"},_e={class:"modal-title"},Ce={class:"q-pa-md text-center"},xe={__name:"ApprenticeDocumentsDetail",setup(ze){const U=uo(),D=ro(),f=_o(),_=n(!1),C=n(!1),b=n(!1),p=n(!1),g=n(!1),x=n(!1),j=n(!1),z=n(""),V=n(null),c=n(null),d=n(null),m=n(null),A=Q(()=>D.params.ficha||"2926076"),h=Q(()=>D.query.nombre||"Alejandra Ruiz Torres"),k=n("Contrato de Aprendizaje"),L=n(["Diseño y Metrología","Economía, Finanzas y Telecomunicaciones","Salud y Actividad Física","Gestión Industrial"]),I=n([{id:1,nombre:"Sylvia Lopez",especialidad:"Diseño y Metrología",cargo:"Instructor de Seguimiento",area:"Diseño y Metrología"},{id:2,nombre:"Juan Carlos García",especialidad:"Economía y Finanzas",cargo:"Instructor de Seguimiento",area:"Economía, Finanzas y Telecomunicaciones"},{id:3,nombre:"María Fernández",especialidad:"Salud y Deporte",cargo:"Instructora de Seguimiento",area:"Salud y Actividad Física"},{id:4,nombre:"Pedro Ramírez",especialidad:"Gestión de Proyectos",cargo:"Instructor de Seguimiento",area:"Gestión Industrial"}]),y=n([]),P=[{name:"documentos",label:"Documentos",align:"left",field:l=>l.nombre,sortable:!0},{name:"options",label:"Opciones",align:"center"}],M=n([{id:1,nombre:"Contrato firmado por todas las partes",url:"/docs/contrato.pdf"},{id:2,nombre:"Certificación de afiliación ARL",url:"/docs/arl.pdf"},{id:3,nombre:"Registro en planilla",url:"/docs/planilla.pdf"}]);function N(){U.back()}function w(l){if(!l)return"";const e=l.split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():l.substring(0,2).toUpperCase()}function $(){if(c.value){const l=[];let e=0;for(;e<I.value.length;){const t=I.value[e];t&&t.area===c.value&&l.push(t),e++}y.value=l}else y.value=[];d.value=null}function G(){const l=M.value[0];q(l)}function O(){z.value="",_.value=!0}function S(){_.value=!1}function J(l){l||(z.value="")}function H(){C.value=!0}function R(){C.value=!1}async function K(){try{R(),setTimeout(()=>{W()},300)}catch{f.notify({type:"negative",message:"Error al aceptar documentos",position:"top"})}}function W(){c.value=null,d.value=null,y.value=[],b.value=!0}function X(l){l||(c.value=null,d.value=null,y.value=[],b.value=!1)}function Y(){if(!c.value||!d.value){f.notify({type:"warning",message:"Debe seleccionar un área y un instructor",position:"top"});return}b.value=!1,setTimeout(()=>{p.value=!0},300)}function Z(){p.value=!1}function oo(l){l||(p.value=!1)}function eo(){m.value={nombre:d.value?.nombre||"",cargo:d.value?.cargo||""},p.value=!1,f.notify({type:"positive",message:"Instructor asignado correctamente",position:"top"}),setTimeout(()=>{g.value=!0},300)}function ao(){g.value=!1}function so(l){l||(g.value=!1)}function q(l){V.value=l,x.value=!0}function to(){x.value=!1}function lo(l){l||(V.value=null)}async function io(){try{f.notify({type:"negative",message:"Documentos rechazados correctamente",position:"top"}),S(),setTimeout(()=>{N()},1e3)}catch{f.notify({type:"negative",message:"Error al rechazar documentos",position:"top"})}}return(l,e)=>(B(),co(yo,{class:"q-pa-md detalle-aprendiz-page"},{default:s(()=>[a(zo,{class:"q-mb-lg"}),o("div",Vo,[o("h2",wo,i(h.value),1),o("div",Do,[o("h3",Ao,"Ficha "+i(A.value),1)]),m.value?(B(),mo("div",ko,[e[10]||(e[10]=o("h4",{class:"instructor-title"},"Instructor Asignado:",-1)),o("div",Io,[o("div",Mo,[o("span",null,i(w(m.value.nombre)),1)]),o("div",So,[o("p",Ro,i(m.value.nombre),1),o("p",qo,i(m.value.cargo),1)])])])):po("",!0),o("div",Eo,[o("p",null,[e[11]||(e[11]=u("La aprendiz seleccionó ",-1)),o("strong",null,i(k.value),1)])]),a(Co,{card:"",rows:M.value,columns:P,"row-key":"id","loanding-table":j.value},{"body-cell-documentos":s(t=>[a(E,{props:t,class:"text-left"},{default:s(()=>[u(i(t.row.nombre),1)]),_:2},1032,["props"])]),"body-cell-options":s(t=>[a(E,{props:t,class:"text-center table-options"},{default:s(()=>[a(xo,{icon:"visibility",color:"grey",tooltip:"Ver documentos",onClick:Ve=>q(t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),"no-data":s(()=>[o("div",Qo,[a(F,{name:"school",size:"2.5em",color:"positive"}),e[12]||(e[12]=o("div",{class:"text-subtitle2 q-mt-sm"}," No hay documentos para mostrar ",-1))])]),_:1},8,["rows","loanding-table"]),o("div",Bo,[a(r,{label:"Rechazar","custom-class":"boton-rechazar",noCaps:!0,onClick:O}),a(r,{label:"Aceptar","custom-class":"boton-aceptar",noCaps:!0,onClick:H})])]),a(v,{modelValue:_.value,"onUpdate:modelValue":[e[1]||(e[1]=t=>_.value=t),J],width:"520px","max-width":"95vw"},{header:s(()=>[...e[13]||(e[13]=[o("div",{class:"modal-header-simple"},[o("h3",{class:"modal-title"},"Rechazar Documentos")],-1)])]),body:s(()=>[o("div",Fo,[o("p",To,[e[14]||(e[14]=u(" ¿Está seguro que desea rechazar los documentos de ",-1)),o("strong",null,i(h.value),1),e[15]||(e[15]=u("? ",-1))]),a(vo,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=t=>z.value=t),type:"textarea",label:"Motivo del rechazo (opcional)",outlined:"",rows:"4",class:"q-mt-md"},null,8,["modelValue"])])]),footer:s(()=>[a(r,{label:"Cancelar","custom-class":"boton-cerrar",noCaps:!0,flat:"",onClick:S}),a(r,{label:"Rechazar","custom-class":"boton-enviar",noCaps:!0,onClick:io})]),_:1},8,["modelValue"]),a(v,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=t=>C.value=t),width:"500px","max-width":"95vw"},{header:s(()=>[...e[16]||(e[16]=[o("div",{class:"modal-header-simple"},[o("h3",{class:"modal-title"},"Aceptar Documentos")],-1)])]),body:s(()=>[o("div",Uo,[o("p",jo,[e[17]||(e[17]=u(" ¿Está seguro que desea aceptar los documentos de ",-1)),o("strong",null,i(h.value),1),e[18]||(e[18]=u("? ",-1))]),e[19]||(e[19]=o("p",{class:"text-caption text-grey-7 q-mt-md"}," Esta acción confirmará que todos los documentos están correctos. ",-1))])]),footer:s(()=>[a(r,{label:"Cancelar","custom-class":"boton-cerrar",noCaps:!0,flat:"",onClick:R}),a(r,{label:"Aceptar","custom-class":"boton-enviar",noCaps:!0,onClick:K})]),_:1},8,["modelValue"]),a(v,{modelValue:b.value,"onUpdate:modelValue":[e[5]||(e[5]=t=>b.value=t),X],width:"600px","max-width":"95vw"},{header:s(()=>[...e[20]||(e[20]=[o("div",{class:"modal-header-custom"},[o("h3",{class:"modal-title"},"Asignar Instructores")],-1)])]),body:s(()=>[o("div",Lo,[o("div",Po,[e[21]||(e[21]=o("label",{class:"form-label"},"Área de conocimiento",-1)),a(T,{modelValue:c.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>c.value=t),$],options:L.value,outlined:"",placeholder:"Seleccione área",class:"custom-select-modal"},null,8,["modelValue","options"])]),o("div",No,[e[22]||(e[22]=o("label",{class:"form-label"},"Instructor de Seguimiento",-1)),a(T,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=t=>d.value=t),options:y.value,"option-label":"nombre","option-value":"id",outlined:"",placeholder:"Seleccione instructor",disable:!c.value,class:"custom-select-modal"},{"no-option":s(()=>[a(bo,null,{default:s(()=>[a(go,{class:"text-grey"},{default:s(()=>[u(i(c.value?"No hay instructores disponibles":"Primero seleccione un área"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"])]),e[23]||(e[23]=o("div",{class:"divider-line"},null,-1)),e[24]||(e[24]=o("div",{class:"aprendiz-info-section"},[o("div",{class:"aprendiz-info-header"},[o("strong",null,"La aprendiz")]),o("div",{class:"aprendiz-details"},[o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Documental:"),o("span",{class:"detail-value"},"Completo")]),o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Contratos fija:"),o("span",{class:"detail-value"},"Aprobado")]),o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Certificación:"),o("span",{class:"detail-value"},"En proceso")]),o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Registro en:"),o("span",{class:"detail-value"},"Sistema")])])],-1))])]),footer:s(()=>[o("div",$o,[a(r,{label:"Asignar","custom-class":"boton-asignar-modal",noCaps:!0,onClick:Y})])]),_:1},8,["modelValue"]),a(v,{modelValue:p.value,"onUpdate:modelValue":[e[6]||(e[6]=t=>p.value=t),oo],width:"600px","max-width":"95vw"},{header:s(()=>[o("div",Go,[o("h3",Oo,i(h.value),1)])]),body:s(()=>[o("div",Jo,[o("div",Ho,[e[25]||(e[25]=o("label",{class:"confirmacion-label"},"Área de conocimiento",-1)),o("div",Ko,[o("div",Wo,i(c.value),1)])]),o("div",Xo,[e[26]||(e[26]=o("label",{class:"confirmacion-label"},"Instructor de Seguimiento",-1)),o("div",Yo,[o("div",Zo,i(w(d.value?.nombre)),1),o("div",oe,[o("p",ee,i(d.value?.nombre),1),o("p",ae,i(d.value?.cargo),1)])])]),e[27]||(e[27]=o("div",{class:"divider-line"},null,-1)),e[28]||(e[28]=o("div",{class:"aprendiz-info-section"},[o("div",{class:"aprendiz-info-header"},[o("strong",null,"La aprendiz")]),o("div",{class:"aprendiz-details"},[o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Documental:"),o("span",{class:"detail-value"},"Completo")]),o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Contratos fija:"),o("span",{class:"detail-value"},"Aprobado")]),o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Certificación:"),o("span",{class:"detail-value"},"En proceso")]),o("div",{class:"detail-item"},[o("span",{class:"detail-label"},"Registro en:"),o("span",{class:"detail-value"},"Sistema")])])],-1))])]),footer:s(()=>[o("div",se,[a(r,{label:"Aceptado","custom-class":"boton-aceptado-modal",noCaps:!0,onClick:eo}),a(r,{label:"Rechazar","custom-class":"boton-rechazar-modal",noCaps:!0,flat:"",onClick:Z})])]),_:1},8,["modelValue"]),a(v,{modelValue:g.value,"onUpdate:modelValue":[e[7]||(e[7]=t=>g.value=t),so],width:"550px","max-width":"95vw"},{header:s(()=>[...e[29]||(e[29]=[o("div",{class:"modal-header-empresa"},[o("h3",{class:"modal-title-empresa"},"REFFORA EP")],-1)])]),body:s(()=>[o("div",te,[o("h2",le,i(h.value),1),o("div",ie,[o("h3",ne,"Ficha "+i(A.value),1)]),o("div",re,[e[30]||(e[30]=o("h4",{class:"instructor-title-modal"},"Instructor Asignado:",-1)),o("div",de,[o("div",ce,[o("span",null,i(w(m.value?.nombre)),1)]),o("div",ue,[o("p",me,i(m.value?.nombre),1),o("p",pe,i(m.value?.cargo),1)])])]),e[35]||(e[35]=o("div",{class:"divider-line-modal"},null,-1)),o("div",ve,[o("p",null,[e[31]||(e[31]=u("La aprendiz seleccionó ",-1)),o("strong",null,i(k.value),1)])]),o("div",fe,[o("table",be,[e[33]||(e[33]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Documentos"),o("th",{class:"text-center"},"Opciones")])],-1)),o("tbody",null,[o("tr",null,[e[32]||(e[32]=o("td",{class:"text-left"},"Contrato firmado por todas las partes",-1)),o("td",ge,[o("a",{href:"#",class:"ver-documentos-link-modal",onClick:fo(G,["prevent"])}," Ver documentos ")])])])]),e[34]||(e[34]=o("p",{class:"postfoneidos-text"},"Postfoneídos de atributos AB",-1))])])]),footer:s(()=>[o("div",he,[a(r,{label:"Cerrar","custom-class":"boton-cerrar",noCaps:!0,onClick:ao})])]),_:1},8,["modelValue"]),a(v,{modelValue:x.value,"onUpdate:modelValue":[e[8]||(e[8]=t=>x.value=t),lo],width:"800px","max-width":"95vw"},{header:s(()=>[o("div",ye,[o("h3",_e,i(V.value?.nombre),1)])]),body:s(()=>[o("div",Ce,[a(F,{name:"description",size:"100px",color:"grey-5"}),e[36]||(e[36]=o("p",{class:"text-body1 q-mt-md"},"Vista previa del documento",-1)),e[37]||(e[37]=o("p",{class:"text-caption text-grey-7"}," En producción aquí se mostraría el PDF o imagen del documento ",-1))])]),footer:s(()=>[a(r,{label:"Cerrar","custom-class":"boton-cerrar",noCaps:!0,onClick:to})]),_:1},8,["modelValue"]),a(r,{icon:"notifications","custom-class":"fab-notificaciones",round:"",onClick:e[9]||(e[9]=t=>l.$router.push("/notificaciones"))},{default:s(()=>[a(ho,{color:"red",floating:""},{default:s(()=>[...e[38]||(e[38]=[u("3",-1)])]),_:1})]),_:1})]),_:1}))}},Ne=no(xe,[["__scopeId","data-v-99f34f2f"]]);export{Ne as default};
